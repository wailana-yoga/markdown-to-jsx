import*as z9 from"react";import{Image as cZ,Linking as E6,Text as f0,View as k0}from"react-native";var P=32,N=9,q9=13,x=10,e=96,_0=126,q0=91,i0=94,u=62,Y9=35,t$=36,c9=37,p=45,C0=61,B0=92,O0=42,H0=95,K0=60,l9=64,u0=93,g0=33,q$=38,x0=58,k$=70,b9=102,o9=104,R9=119,W$=116,S$=112,e$=115,$6=160,Z6=12,E$=44,z$=59,g9=63,n0=46,j0=47,H9=39,W9=34,D9=43,b0=124,j9=123,Z$=125,s0=40,t0=41,r9=30,g$=31,s=48,t=57,o=65,a=90,W0=97,D0=122,x9=128,K9=32,KZ={blockQuote:0,breakLine:1,breakThematic:2,codeBlock:3,codeInline:4,footnote:5,footnoteReference:6,frontmatter:7,gfmTask:8,heading:9,htmlBlock:10,htmlComment:11,htmlSelfClosing:12,image:13,link:14,orderedList:15,paragraph:16,ref:17,refCollection:18,table:19,text:20,textFormatted:21,unorderedList:22},_=KZ;import{decodeEntity as GZ}from"markdown-to-jsx/entities";function V6($){if(!Q6($,"---"))return null;let J=3;for(;J<$.length&&($[J]===" "||$[J]==="	");)J++;if(J<$.length&&$[J]==="\r"&&J++,J>=$.length||$[J]!==`
`)return null;J++;let Z=!1;for(;J<$.length;){let Q=J;for(;J<$.length&&$[J]!==`
`&&$[J]!=="\r";)J++;if(J>=$.length)break;let X=J;if($[J]==="\r"&&J++,J<$.length&&$[J]===`
`&&J++,Q6($,"---",Q))return{endPos:J,hasValidYaml:Z};let Y=$.indexOf(":",Q);Y!==-1&&Y<X&&(Z=!0)}return null}var VZ=/&([a-zA-Z0-9]+|#[0-9]{1,7}|#x[0-9a-fA-F]{1,6});/gi,FZ={class:"className",for:"htmlFor",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",cellpadding:"cellPadding",cellspacing:"cellSpacing",charset:"charSet",classid:"classId",colspan:"colSpan",contenteditable:"contentEditable",contextmenu:"contextMenu",crossorigin:"crossOrigin",enctype:"encType",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",hreflang:"hrefLang",inputmode:"inputMode",keyparams:"keyParams",keytype:"keyType",marginheight:"marginHeight",marginwidth:"marginWidth",maxlength:"maxLength",mediagroup:"mediaGroup",minlength:"minLength",novalidate:"noValidate",radiogroup:"radioGroup",readonly:"readOnly",rowspan:"rowSpan",spellcheck:"spellCheck",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",tabindex:"tabIndex",usemap:"useMap",viewbox:"viewBox"};function w9($){var J={};for(var Z in $){var Q=Z.toLowerCase(),X=FZ[Q];if(X)J[X]=$[Z];else{var Y=Z.indexOf(":");Y!==-1?J[Z.slice(0,Y)+Z[Y+1].toUpperCase()+Z.slice(Y+2)]=$[Z]:J[Z]=$[Z]}}return J}var F6=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s|^<(div|p|h[1-6]|ul|ol|li|blockquote|pre|table|thead|tbody|tr|td|th|dl|dt|dd|hr|address|article|aside|details|dialog|figure|figcaption|footer|form|header|main|menu|nav|section|summary|textarea|fieldset|legend|center|dir|hgroup|marquee|search|output|template)\b)/i;function H$($){return $.indexOf("&")===-1?$:$.replace(VZ,(J,Z)=>{var Q=GZ(Z);if(Q)return Q;if(Z[0]==="#"){var X=Z[1]==="x"||Z[1]==="X"?parseInt(Z.slice(2),16):parseInt(Z.slice(1),10);return X===0||X>=55296&&X<=57343||X>1114111?"\uFFFD":X<=65535?String.fromCharCode(X):String.fromCharCode(55296+(X-65536>>10),56320+(X-65536&1023))}return J})}var J6=/(javascript|vbscript|data(?!:image)):/i;function T9($){if(J6.test($))return null;if($.indexOf("%")===-1)return $;try{let J=decodeURIComponent($).replace(/[^A-Za-z0-9/:]/g,"");if(J6.test(J))return null}catch{return null}return $}var h0={},p0,R0;for(p0=[192,193,194,195,196,197,224,225,226,227,228,229,230,198],R0=0;R0<p0.length;R0++)h0[p0[R0]]="a";for(h0[231]=h0[199]="c",h0[240]=h0[208]="d",p0=[200,201,202,203,233,232,234,235],R0=0;R0<p0.length;R0++)h0[p0[R0]]="e";for(p0=[207,239,206,238,205,237,204,236],R0=0;R0<p0.length;R0++)h0[p0[R0]]="i";for(h0[209]=h0[241]="n",p0=[248,216,339,338,213,245,212,244,211,243,210,242],R0=0;R0<p0.length;R0++)h0[p0[R0]]="o";for(p0=[220,252,219,251,218,250,217,249],R0=0;R0<p0.length;R0++)h0[p0[R0]]="u";h0[376]=h0[255]=h0[221]=h0[253]="y";function qZ($){return $<x9&&(HZ[$]&(f$|q6))!==0}function e0($){for(var J="",Z=-1,Q=0;Q<$.length;Q++){var X=$.charCodeAt(Q);if(qZ(X))X>=o&&X<=a?(Z>=0&&(J+=$.slice(Z,Q),Z=-1),J+=String.fromCharCode(X+K9)):Z<0&&(Z=Q);else if(X===P||X===p)Z>=0&&(J+=$.slice(Z,Q),Z=-1),J+="-";else{Z>=0&&(J+=$.slice(Z,Q),Z=-1);var Y=h0[X];Y&&(J+=Y)}}return Z>=0&&(J+=$.slice(Z)),J}function Q6($,J,Z){return $.startsWith(J,Z)}var X6=new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr","circle","ellipse","line","path","polygon","polyline","rect","use","stop","animate","set"]);function h9($){let J=$.toLowerCase();if(X6.has(J))return!0;let Z=J.indexOf(":");return Z!==-1?(J=J.slice(Z+1),X6.has(J)):!1}var J$=1,U$=2,f$=4,q6=8,Y6=16,K6=32,WZ=64,G6=1,zZ=2,UZ=3,OZ=4,HZ=(function(){let $=new Uint8Array(128),J;for($[N]=J$|K6,$[x]=J$|Y6,$[Z6]=J$,$[q9]=J$|Y6,$[P]=J$|K6,J=g0;J<=j0;J++)$[J]=U$;for(J=x0;J<=l9;J++)$[J]=U$;for(J=q0;J<=e;J++)$[J]=U$;for(J=j9;J<=_0;J++)$[J]=U$;for(J=s;J<=t;J++)$[J]=q6;for(J=o;J<=a;J++)$[J]=f$|WZ;for(J=W0;J<=D0;J++)$[J]=f$;return $})(),QJ=(function(){let $=new Uint8Array(128);return $[B0]=zZ,$[q0]=OZ,$[O0]=$[H0]=$[_0]=$[C0]=UZ,$[e]=$[K0]=$[l9]=$[u0]=$[x]=$[P]=$[g0]=G6,$[b9]=$[o9]=$[R9]=G6,$})(),f9=[];function T$($){var J=$.indexOf("\r"),Z=$.indexOf("\0");if(J===-1&&Z===-1)return $;var Q=$.length;f9.length=0;var X=0,Y=0;for(J===-1?Y=Z:Z===-1?Y=J:Y=J<Z?J:Z;Y<Q;Y++){var F=$.charCodeAt(Y);F===q9?(X<Y&&f9.push($.slice(X,Y)),Y+1<Q&&$.charCodeAt(Y+1)===x&&Y++,f9.push(`
`),X=Y+1):F===0&&(X<Y&&f9.push($.slice(X,Y)),f9.push("\uFFFD"),X=Y+1)}return X<Q&&f9.push($.slice(X)),f9.join("")}function XJ($){if(!$)return!1;for(var J in $)return!0;return!1}function i9($,J,Z){for(var Q=$,X=J.split("."),Y=0;Y<X.length&&(Q=Q?.[X[Y]],Q!==void 0);)Y++;return Q||Z}function W6($){for(var J=!1,Z=0;Z<$.length;Z++){var Q=$.charCodeAt(Z);if(Q<=P||Q===W9||Q===c9||Q===K0||Q===u||Q===q0||Q===B0||Q===u0||Q===i0||Q===e||Q>=123){J=!0;break}}if(!J)return $;for(var X="",Z=0;Z<$.length;Z++){var Q=$.charCodeAt(Z);if(Q===c9&&Z+2<$.length){var Y=$.charCodeAt(Z+1),F=$.charCodeAt(Z+2);if((Y>=s&&Y<=t||Y>=o&&Y<=k$||Y>=W0&&Y<=b9)&&(F>=s&&F<=t||F>=o&&F<=k$||F>=W0&&F<=b9)){X+=$[Z]+$[Z+1]+$[Z+2],Z+=2;continue}}X+=encodeURI($[Z])}return X}function YJ(...$){return $.filter(Boolean).join(" ")}function KJ($,J){if(!J)return $;let Z=i9(J,$,void 0);return typeof Z=="string"?Z:typeof Z=="object"&&Z.component?Z.component:$}function GJ($,J){if(!J)return{};let Z=i9(J,$,void 0);return typeof Z=="object"&&Z.props?Z.props:{}}var DZ=new Set(["title","textarea","style","xmp","iframe","noembed","noframes","script","plaintext"]),O$=/<(\/?)(title|textarea|style|xmp|iframe|noembed|noframes|script|plaintext)(\s|>|\/)/gi;function h$($){return DZ.has($.toLowerCase())}function VJ($){return O$.lastIndex=0,O$.test($)}function m$($){return O$.lastIndex=0,$.replace(O$,function(J,Z,Q,X){return"&lt;"+Z+Q+X})}var qJ=/^<([a-zA-Z][a-zA-Z0-9-]*)\s[^>]*>/,WJ=/^<[A-Z]/,C$=["script","pre","style","textarea"],X$=new Set(C$),jZ=/<(?:pre|script|style|textarea)\b/i,BZ=new Set(["table","thead","tbody","tfoot","tr","td","th"]),_6=new Uint8Array(128);(function(){for(var $=[e,O0,H0,_0,C0,q0,g0,K0,B0,g$,o9,R9,b9],J=0;J<$.length;J++)_6[$[J]]=1})();var U6=/([a-zA-Z_][a-zA-Z0-9_-]*)=(?:"([^"]*)"|'([^']*)')/g;function d$($){return X$.has($)}function zJ($){return jZ.test($)}function I6($,J,Z){for(var Q=J,X=Z;Q<X&&($.charCodeAt(Q)===P||$.charCodeAt(Q)===N);)Q++;if(Q>=X)return!1;$.charCodeAt(Q)===b0&&Q++;for(var Y=0;Q<X;){for(;Q<X&&($.charCodeAt(Q)===P||$.charCodeAt(Q)===N);)Q++;if(Q>=X)break;if($.charCodeAt(Q)===b0&&Y>0){for(var F=Q+1;F<X&&($.charCodeAt(F)===P||$.charCodeAt(F)===N);)F++;if(F>=X)return!0}if($.charCodeAt(Q)===x0&&Q++,Q>=X||$.charCodeAt(Q)!==p)return!1;for(;Q<X&&$.charCodeAt(Q)===p;)Q++;for(Q<X&&$.charCodeAt(Q)===x0&&Q++,Y++;Q<X&&($.charCodeAt(Q)===P||$.charCodeAt(Q)===N);)Q++;if(Q<X)if($.charCodeAt(Q)===b0)Q++;else return!1}return Y>0}function M9($,J){if($.charCodeAt(J)!==K0)return null;let Z=J+1,Q=$.length,X=!1;$.charCodeAt(Z)===j0&&(Z++,X=!0);let Y=Z,F=$.charCodeAt(Z);if(!(F>=W0&&F<=D0||F>=o&&F<=a))return null;for(;Z<Q&&($.charCodeAt(Z)>=W0&&$.charCodeAt(Z)<=D0||$.charCodeAt(Z)>=o&&$.charCodeAt(Z)<=a||$.charCodeAt(Z)>=s&&$.charCodeAt(Z)<=t||$.charCodeAt(Z)===p);)Z++;let V=$.slice(Y,Z);if(!V)return null;let G=Z;for(;Z<Q&&($.charCodeAt(Z)===P||$.charCodeAt(Z)===N||$.charCodeAt(Z)===x);)Z++;let K=$.slice(G,Z);if(Z===G&&Z<Q){var q=$.charCodeAt(Z);if(q!==u&&q!==j0)return null}let W=Z,O={},U=!1;for(;Z<Q;){let L=$.charCodeAt(Z);if(L===u){let y=$.slice(W,Z);return{tag:V,attrs:O,selfClosing:!1,end:Z+1,rawAttrs:y,whitespaceBeforeAttrs:K,isClosing:X,hasSpaceBeforeSlash:U}}if(L===P||L===N||L===x){Z++;continue}if(L===j0&&Z+1<Q&&$.charCodeAt(Z+1)===u){let y=$.slice(W,Z);return U=Z>W&&$.charCodeAt(Z-1)===P,{tag:V,attrs:O,selfClosing:!0,end:Z+2,rawAttrs:y,whitespaceBeforeAttrs:K,isClosing:X,hasSpaceBeforeSlash:U}}var j=Z,H=$.charCodeAt(Z);if(!(H>=W0&&H<=D0||H>=o&&H<=a||H===H0||H===x0))return null;for(Z++;Z<Q;){var z=$.charCodeAt(Z);if(z>=W0&&z<=D0||z>=o&&z<=a||z>=s&&z<=t||z===H0||z===n0||z===x0||z===p)Z++;else break}for(var D=$.slice(j,Z);Z<Q&&($.charCodeAt(Z)===P||$.charCodeAt(Z)===N);)Z++;if($.charCodeAt(Z)!==C0){O[D]="";continue}for(Z++;Z<Q&&($.charCodeAt(Z)===P||$.charCodeAt(Z)===N);)Z++;var A=$.charCodeAt(Z);if(A===W9||A===H9){Z++;for(var B=Z;Z<Q&&$.charCodeAt(Z)!==A;)Z++;if(Z>=Q)return null;if(O[D]=$.slice(B,Z),Z++,Z<Q){var k=$.charCodeAt(Z);if(k!==P&&k!==N&&k!==x&&k!==u&&k!==j0)return null}}else if(A===j9){var I=1,B=Z;for(Z++;Z<Q&&I>0;){var z=$.charCodeAt(Z);z===j9?I++:z===Z$&&I--,Z++}O[D]=$.slice(B,Z)}else{for(var B=Z;Z<Q;){var v=$.charCodeAt(Z);if(v===P||v===N||v===u||v===x||v===W9||v===H9||v===C0||v===K0||v===e)break;Z++}if(Z===B)return null;O[D]=$.slice(B,Z)}}return null}function A$($,J,Z){for(var Q=0,X=$.length,Y=!1;Q<X;){for(var F=$.indexOf(`
`,Q),V=F<0?X:F,G=Q,K=0;G<V&&K<4;)if($.charCodeAt(G)===P)K++,G++;else if($.charCodeAt(G)===N)K+=4,G++;else break;if(G>=V){Y=!1,Q=F<0?X:F+1;continue}if(K<4){var q=$.charCodeAt(G);if(q===e||q===_0){for(var W=q,O=0,U=G;U<V&&$.charCodeAt(U)===W;)O++,U++;if(O>=3){Y=!1;for(var j=F<0?X:F+1;j<X;){for(var H=j,z=0;H<X&&z<4;){var D=$.charCodeAt(H);if(D===P)z++,H++;else if(D===N)z+=4,H++;else break}if(z<4&&H<X&&$.charCodeAt(H)===W){for(var A=0;H<X&&$.charCodeAt(H)===W;)A++,H++;if(A>=O){for(;H<X&&($.charCodeAt(H)===P||$.charCodeAt(H)===N);)H++;if(H>=X||$.charCodeAt(H)===x){Q=H>=X?X:H+1;break}}}for(;j<X&&$.charCodeAt(j)!==x;)j++;j<X&&j++}j>=X&&(Q=X);continue}}}for(var B=G;B<V&&$.charCodeAt(B)===u;){B++,B<V&&$.charCodeAt(B)===P&&B++;for(var k=0;B<V&&k<4;)if($.charCodeAt(B)===P)k++,B++;else if($.charCodeAt(B)===N)k+=4,B++;else break;if(k>=4)break;Y=!1}if(!Y&&K<4&&B<V&&$.charCodeAt(B)===q0&&!(B+1<X&&$.charCodeAt(B+1)===i0)){var I=P6($,B,J);if(I){Q=I,Y=!1;continue}}var v=$.charCodeAt(G);if(v===Y9&&K<4)Y=!1;else if(K<4&&(v===p||v===O0||v===H0)){for(var L=G,y=0;L<V;){var R=$.charCodeAt(L);if(R===v)y++;else if(R!==P&&R!==N)break;L++}Y=!(y>=3&&L>=V)}else Y=!0;Q=F<0?X:F+1}}function P6($,J,Z){let Q=$.length;if($.charCodeAt(J)!==q0)return null;let X=J+1<Q&&$.charCodeAt(J+1)===i0,Y=J+1;for(;Y<Q;){var F=$.charCodeAt(Y);if(F===u0){Y++;break}if(F===q0)return null;F===B0&&Y+1<Q&&Y++,Y++}if(Y>Q||$.charCodeAt(Y-1)!==u0)return null;let V=$.slice(J+1,Y-1);if(V.length>999)return null;let G=D$(V);if(!G||Y>=Q||$.charCodeAt(Y)!==x0)return null;Y++;let K=!1;for(;Y<Q;){let E=$.charCodeAt(Y);if(E===P||E===N)Y++;else if(E===x&&!K)K=!0,Y++;else break}if(X){let E=$.indexOf(`
`,Y),h=E<0?Q:E,T=$.slice(Y,h).trim();return Z[G]={target:T,title:void 0},E<0?Q:E+1}var q;if(Y<Q&&$.charCodeAt(Y)===K0){Y++;for(var W=Y;Y<Q&&$.charCodeAt(Y)!==u&&$.charCodeAt(Y)!==x;)$.charCodeAt(Y)===B0&&Y+1<Q&&Y++,Y++;if(Y>=Q||$.charCodeAt(Y)!==u)return null;q=$.slice(W,Y),Y++;for(var O=$.indexOf(`
`,Y),U=O<0?Q:O,j=Y;j<U&&($.charCodeAt(j)===P||$.charCodeAt(j)===N);)j++;if(j<U){if(j===Y)return null;var H=$.charCodeAt(j);if(H!==W9&&H!==H9&&H!==s0)return null}}else{for(var W=Y,z=0;Y<Q;){var F=$.charCodeAt(Y);if(F===s0)z++;else if(F===t0){if(z===0)break;z--}else{if(F===P||F===N||F===x)break;F===B0&&Y+1<Q&&Y++}Y++}if(q=$.slice(W,Y),!q)return null}for(;Y<Q&&($.charCodeAt(Y)===P||$.charCodeAt(Y)===N);)Y++;var D=$.indexOf(`
`,Y),A=D<0?Q:D,B,k=!1,I=Y,v=Y;if(Y===A&&Y<Q)for(v=Y+1;v<Q&&($.charCodeAt(v)===P||$.charCodeAt(v)===N);)v++;if(v<Q){var L=$.charCodeAt(v);if(L===W9||L===H9||L===s0){for(var y=L===s0?41:L,R=v+1,b=R;R<Q;){var w=$.charCodeAt(R);if(w===y){for(var S=R+1;S<Q&&($.charCodeAt(S)===P||$.charCodeAt(S)===N);)S++;(S>=Q||$.charCodeAt(S)===x)&&(B=$.slice(b,R),k=!0,I=S<Q?S+1:Q);break}if(w===B0&&R+1<Q){R+=2;continue}if(w===x&&R+1<Q&&$.charCodeAt(R+1)===x)break;R++}if(!k&&v===Y)return null}}if(k)return Z[G]||(Z[G]={target:n9(q),title:B!==void 0?H$(n9(B)):B}),I;for(;Y<A&&($.charCodeAt(Y)===P||$.charCodeAt(Y)===N);)Y++;return Y<A?null:(Z[G]||(Z[G]={target:n9(q),title:B}),D<0?Q:D+1)}var s9=1,N6=2,Z0=4,b6=8,MZ=16,G9=32,k9=64,d=new Uint8Array(128);d[P]=s9,d[N]=s9,d[x]=s9|N6,d[q9]=s9|N6,d[Y9]=G9|Z0,d[u]=G9|Z0,d[p]=G9|k9|Z0,d[D9]=G9|Z0,d[O0]=G9|k9|Z0,d[H0]=G9|k9|Z0,d[e]=G9|k9|Z0,d[_0]=G9|k9|Z0,d[K0]=G9|k9|Z0,d[q0]=k9|Z0,d[g0]=k9|Z0,d[b0]=G9|Z0;for(let $=s;$<=t;$++)d[$]=MZ|G9;for(let $=o;$<=a;$++)d[$]=b6;for(let $=W0;$<=D0;$++)d[$]=b6;d[B0]=Z0,d[u0]=Z0,d[s0]=Z0,d[t0]=Z0,d[x0]=Z0,d[W9]=Z0,d[H9]=Z0,d[q$]=Z0,d[C0]=Z0,d[t$]=Z0,d[c9]=Z0,d[E$]=Z0,d[n0]=Z0,d[j0]=Z0,d[z$]=Z0,d[g9]=Z0,d[l9]=Z0,d[i0]=Z0,d[j9]=Z0,d[Z$]=Z0;function O6($){if($.indexOf("[")<0&&$.indexOf("]")<0)return!1;for(var J=0;J<$.length;J++){if($.charCodeAt(J)===B0){J++;continue}if($.charCodeAt(J)===q0||$.charCodeAt(J)===u0)return!0}return!1}function D$($){var J=$.replace(/\s+/g," ").trim();return J.indexOf("\u1E9E")!==-1?J.replace(/\u1E9E/g,"ss").toLowerCase():J.toLowerCase()}function c$($){return $<x9?d[$]:$===$6?s9:0}function n9($){return $.replace(/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,"$1")}function Y0($,J){var Z=$.indexOf(`
`,J);return Z<0?$.length:Z}function r($,J){let Z=Y0($,J);return Z<$.length?Z+1:Z}function Q$($,J,Z){for(;J<Z;){let Q=$.charCodeAt(J);if(Q!==P&&Q!==N)break;J++}return J}function H6($,J){let Z=r($,J);for(;Z<$.length;){let Q=Y0($,Z);if($9($,Z,Q))return Z;Z=r($,Z)}return $.length}function _9($,J,Z,Q){let X=0;for(;J+X<Z&&$.charCodeAt(J+X)===Q;)X++;return X}var Q0=0,$0=0;function M0($,J,Z){for(Q0=0,$0=0;J+$0<Z;){let Q=$.charCodeAt(J+$0);if(Q===N)Q0+=4-Q0%4;else if(Q===P)Q0++;else break;$0++}}function $9($,J,Z){return Q$($,J,Z)>=Z}function R6($,J,Z,Q){let X=Y0($,J);if(M0($,J,X),Q0>3)return null;let Y=J+$0;if($.charCodeAt(Y)!==Y9)return null;let F=_9($,Y,X,35);if(F<1||F>6||(Y+=F,Y<X&&$.charCodeAt(Y)!==P&&$.charCodeAt(Y)!==N))return null;Y=Q$($,Y,X);for(var V=X;V>Y&&$.charCodeAt(V-1)===P;)V--;for(var G=V;V>Y&&$.charCodeAt(V-1)===Y9;)V--;if(V<G)if(V===Y||$.charCodeAt(V-1)===P)for(;V>Y&&$.charCodeAt(V-1)===P;)V--;else V=G;let K=$.slice(Y,V),q=d0(K,0,K.length,Z,Q),O=(Q?.slugify||e0)(K);return{node:{type:_.heading,level:F,children:q,id:O},end:r($,X)}}function L9($,J){let Z=Y0($,J);if(M0($,J,Z),Q0>3)return null;let Q=J+$0,X=$.charCodeAt(Q);if(X!==p&&X!==O0&&X!==H0)return null;let Y=0;for(;Q<Z;){let F=$.charCodeAt(Q);if(F===X)Y++;else if(F!==P&&F!==N)return null;Q++}return Y<3?null:{node:{type:_.breakThematic},end:r($,Z)}}function AZ($,J,Z){let Q=Y0($,J);if(M0($,J,Q),Q0>3)return null;let X=Q0,Y=$0,F=J+$0,V=$.charCodeAt(F);if(V!==e&&V!==_0)return null;let G=_9($,F,Q,V);if(G<3)return null;F+=G;let K=Q$($,F,Q),q=Q;if(V===e){for(let R=K;R<Q;R++)if($.charCodeAt(R)===e)return null}for(;q>K&&($.charCodeAt(q-1)===P||$.charCodeAt(q-1)===N);)q--;let W=$.slice(K,q),O="",U="",j=W.indexOf(" ");j===-1?O=W:(O=W.slice(0,j),U=W.slice(j+1).trim()),O=n9(O);var H=void 0;if(U){U6.lastIndex=0;for(var z;(z=U6.exec(U))!==null;)H||(H={}),H[z[1]]=z[2]!==void 0?z[2]:z[3]}let D=r($,Q),A=D,B=$.length;for(;A<$.length;){let R=Y0($,A);if(M0($,A,R),Q0<4){let b=A+$0;var k=_9($,b,R,V);if(k>=G){let w=b+k;if($9($,w,R)){B=r($,R);break}}}A=r($,R)}var I;if(X===0)I=A>D&&$.charCodeAt(A-1)===x?$.slice(D,A-1):$.slice(D,A);else{I="";for(var v=D;v<A;){var L=Y0($,v);M0($,v,L);var y=Math.min($0,X);I+=$.slice(v+y,L)+`
`,v=r($,L)}I.length>0&&I.charCodeAt(I.length-1)===x&&(I=I.slice(0,-1))}return{node:{type:_.codeBlock,lang:O||void 0,text:I,infoString:U||void 0,attrs:H},end:B}}function vZ($,J){let Z=Y0($,J);if(M0($,J,Z),Q0<4)return null;let Q="",X=J;for(;X<$.length;){let U=Y0($,X);if(M0($,X,U),$9($,X,U)){for(var Y=0,F=r($,U);F<$.length;){var V=Y0($,F);if($9($,F,V)){Y++,F=r($,V);continue}if(M0($,F,V),Q0>=4){for(var G=0;G<=Y;G++)Q+=`
`;X=F;break}break}if(X!==F)break;continue}if(Q0<4)break;let j=0,H=0;var K=0;for(let z=X;z<U&&H<4;z++){if($.charCodeAt(z)===N){var q=4-H%4;H+q>4&&(K=H+q-4),H+=q}else H++;j++}var W="";if(K>0)for(var O=0;O<K;O++)W+=" ";W+=$.slice(X+j,U),Q+=W+`
`,X=r($,U)}for(;Q.length>0&&Q.charCodeAt(Q.length-1)===x;)Q=Q.slice(0,-1);for(;Q.length>0&&Q.charCodeAt(Q.length-1)===x;)Q=Q.slice(0,-1);return Q?{node:{type:_.codeBlock,text:Q},end:X}:null}function _Z($,J,Z,Q){let X=Y0($,J);if(M0($,J,X),Q0>3)return null;let Y=J+$0;if($.charCodeAt(Y)!==u)return null;let F="",V=J,G,K=!1,q=!1,W=!1;for(;V<$.length;){let g=Y0($,V);M0($,V,g);let I0=V+$0;if($.charCodeAt(I0)===u){let c=I0+1;var O=Q0+1,U=!1;if(c<g){var j=$.charCodeAt(c);j===P?(c++,O++,U=!0):j===N&&(U=!0)}for(var H="",z=!1,D=c;D<g;D++)if($.charCodeAt(D)===N){z=!0;break}if(z){var A=O;if(U&&c<g&&$.charCodeAt(c)===N){for(var B=4-A%4,k=0;k<B-1;k++)H+=" ";A+=B,c++}for(var I=c;I<g;I++)if($.charCodeAt(I)===N){for(var v=4-A%4,L=0;L<v;L++)H+=" ";A+=v}else H+=$[I],A++}else H=$.slice(c,g);if(!F&&!G){let m=H.match(/^\[!([A-Za-z]+)\]\s*$/);if(m){G=m[1].toUpperCase(),V=r($,g);continue}}F+=H+`
`;var y=H.trimStart();y.startsWith("```")||y.startsWith("~~~")?W=!W:H.startsWith("    ")||H.startsWith("	")?W=!0:y.length>0&&!W&&(W=!1),q=y.length>0,V=r($,g)}else if(F&&!$9($,V,g)&&q){if(Q0<4){var R=V+$0,b=R<g?$.charCodeAt(R):0;if(b===Y9||b===u||b===e||b===_0||b===K0||(b===p||b===O0||b===H0)&&L9($,V)||(b===p||b===O0||b===D9)&&R+1<g&&($.charCodeAt(R+1)===P||$.charCodeAt(R+1)===N))break;if(b>=s&&b<=t){for(var w=R;w<g&&$.charCodeAt(w)>=s&&$.charCodeAt(w)<=t;)w++;if(w<g&&($.charCodeAt(w)===n0||$.charCodeAt(w)===t0))break}}if(W)break;F+=$.slice(V,g)+`
`,K=!0,V=r($,g)}else break}if(!F&&!G)return null;var{inBlockQuote:S,f:E}=Z;Z.inBlockQuote=!0,K&&(Z.f=!0);let h=v9(F||"",Z,Q);Z.inBlockQuote=S,Z.f=E;let T={type:_.blockQuote,children:h};return G&&(T.alert=G),{node:T,end:V}}function w6($,J,Z){for(var Q=0,X=J;X<Z;X++)$.charCodeAt(X)===N?Q+=4-Q%4:Q++;return Q}function y9($,J,Z){if(M0($,J,Z),Q0>3)return null;var Q=J+$0;if(Q>=Z)return null;var X=$.charCodeAt(Q),Y=Q0,F=Q;if(X===p||X===O0||X===D9){if(F=Q+1,F<Z&&$.charCodeAt(F)!==P&&$.charCodeAt(F)!==N&&$.charCodeAt(F)!==x)return null}else if(X>=s&&X<=t){for(var V=Q;V<Z&&V-Q<9;){var G=$.charCodeAt(V);if(G<s||G>t)break;V++}if(V>Q&&V<Z){var K=$.charCodeAt(V);if(K===n0||K===t0){if(F=V+1,F<Z&&$.charCodeAt(F)!==P&&$.charCodeAt(F)!==N&&$.charCodeAt(F)!==x)return null}else return null}else return null}else return null;var q=F,W=w6($,J,F),O=0,U=q,j=W;if(q>=Z)return{ordered:X>=s&&X<=t,marker:X>=s&&X<=t?$[V]:$[Q],start:X>=s&&X<=t?parseInt($.slice(Q,V),10):void 0,contentStart:q,contentCol:W+1,markerCol:Y,isEmpty:!0};for(;U<Z&&($.charCodeAt(U)===P||$.charCodeAt(U)===N);){if($.charCodeAt(U)===N){var H=4-j%4;j+=H}else j++;U++,O++}var z=U>=Z,D=j-W;return z||D>4?(j=W+1,U=q+1,O=1):O===0&&(j=W+1,U=q,O=1),{ordered:X>=s&&X<=t,marker:X>=s&&X<=t?$[V]:$[Q],start:X>=s&&X<=t?parseInt($.slice(Q,V),10):void 0,contentStart:U,contentCol:j,markerCol:Y,isEmpty:z}}var j$=0;function IZ($,J,Z,Q){var X=0,Y=J;for(j$=0;Y<Z&&X<Q;){var F=$.charCodeAt(Y);if(F===N){var V=4-X%4;if(X+V>Q){j$=X+V-Q,Y++,X=Q;break}X+=V}else if(F===P)X++;else break;Y++}return Y}function D6($,J,Z,Q){var X=Y0($,J),Y=y9($,J,X);if(!Y)return null;var F=[],V=J,G=Y.contentCol,K="",q=Y.isEmpty,W=!1,O=!1;if(!Y.isEmpty){for(var U=!1,j=Y.contentStart;j<X;j++)if($.charCodeAt(j)===N){U=!0;break}if(U){var H="",z=w6($,J,Y.contentStart),D=z-Y.contentCol;if(D>0)for(var A=0;A<D;A++)H+=" ";for(var B=Y.contentStart;B<X;B++)if($.charCodeAt(B)===N){for(var k=4-z%4,I=0;I<k;I++)H+=" ";z+=k}else H+=$[B],z++;K=H+`
`}else K=$.slice(Y.contentStart,X)+`
`}for(V=r($,X);V<$.length;){var v=Y0($,V);M0($,V,v);var L=$.charCodeAt(V+$0);if(Q0<G&&(L===p||L===O0||L===H0)&&Q0<=3&&L9($,V))break;var y=y9($,V,v);if(y&&y.ordered===Y.ordered&&y.marker===Y.marker&&y.markerCol<G){F.push({contentCol:G,raw:K,hasBlankAfter:W,isEmpty:q}),W&&(O=!0),G=y.contentCol,q=y.isEmpty,W=!1,K=y.isEmpty?"":$.slice(y.contentStart,v)+`
`,V=r($,v);continue}if($9($,V,v)){K+=`
`,V=r($,v);for(var R=!1,b=0;b<K.length;b++){var w=K.charCodeAt(b);if(w!==x&&w!==q9&&w!==P&&w!==N){R=!0;break}}if(q&&!R)if(V<$.length){var S=Y0($,V),E=y9($,V,S);if(!E||E.ordered!==Y.ordered||E.marker!==Y.marker)break;W=!0}else break;if(V<$.length){var h=Y0($,V);M0($,V,h);var T=$.charCodeAt(V+$0);if((T===p||T===O0||T===H0)&&Q0<=3&&L9($,V))break;var g=y9($,V,h);if(g&&g.ordered===Y.ordered&&g.marker===Y.marker&&g.markerCol<G){W=!0;continue}if(!$9($,V,h)&&Q0<G)break}continue}if(Q0>=G){var I0=IZ($,V,v,G);if(j$>0){for(var c="",m=G,J0=0;J0<j$;J0++)c+=" ",m++;for(var A0=I0;A0<v;A0++)if($.charCodeAt(A0)===N){for(var m0=4-m%4,z0=0;z0<m0;z0++)c+=" ";m+=m0}else c+=$[A0],m++;K+=c+`
`}else K+=$.slice(I0,v)+`
`;V=r($,v);continue}for(var P0=!1,f=0;f<K.length;f++){var X0=K.charCodeAt(f);if(X0!==x&&X0!==q9&&X0!==P&&X0!==N){P0=!0;break}}if(!W&&P0&&!q){var w0=V+$0,G0=$.charCodeAt(w0),i=G0===Y9||G0===u||G0===K0||G0===e||G0===_0||(G0===p||G0===O0||G0===H0||G0===D9)&&(L9($,V)!==null||y9($,V,v)!==null)||G0>=s&&G0<=t&&y9($,V,v)!==null;if(!i){K+=""+$.slice(w0,v)+`
`,V=r($,v);continue}}break}if(F.push({contentCol:G,raw:K,hasBlankAfter:W,isEmpty:q}),F.length===0)return null;var U0=O;if(!U0)for(var N0=0;N0<F.length;N0++){if(F[N0].hasBlankAfter&&N0<F.length-1){U0=!0;break}if(!F[N0].isEmpty){for(var M=F[N0].raw,C=M.length,F0=0,y0=!1,n=!1,L0=!1,l=!1,c0=0,l0=0,T0=-1;F0<C;){var V0=M.indexOf(`
`,F0);if(V0<0&&(V0=C),l){M0(M,F0,V0);for(var C9=M.slice(F0+$0,V0),Z9=0;Z9<C9.length&&C9.charCodeAt(Z9)===c0;)Z9++;Z9>=l0&&C9.slice(Z9).trim()===""&&(l=!1),F0=V0<C?V0+1:C;continue}if($9(M,F0,V0)){T0>=0?L0=!0:y0&&(n=!0),F0=V0<C?V0+1:C;continue}if(M0(M,F0,V0),T0>=0){if(Q0>=T0){F0=V0<C?V0+1:C;continue}var S9=y9(M,F0,V0);if(S9&&S9.markerCol<T0&&S9.contentCol<=T0){F0=V0<C?V0+1:C;continue}if(S9){F0=V0<C?V0+1:C;continue}T0=-1,L0&&(n=!0,L0=!1)}var u9=M.slice(F0+$0,V0),I9=u9.charCodeAt(0);if((I9===e||I9===_0)&&Q0<=3){for(var Q9=0;Q9<u9.length&&u9.charCodeAt(Q9)===I9;)Q9++;if(Q9>=3){if(n&&y0){U0=!0;break}l=!0,c0=I9,l0=Q9,y0=!0,F0=V0<C?V0+1:C;continue}}var Y$=Q0<=3?y9(M,F0,V0):null;if(Y$&&y0){if(n){U0=!0;break}T0=Y$.contentCol,L0=!1,F0=V0<C?V0+1:C,y0=!0;continue}if(n){U0=!0;break}y0=!0,F0=V0<C?V0+1:C}if(U0)break}}for(var X9=[],V9=0;V9<F.length;V9++){for(var P9=F[V9],J9=P9.raw,o0=J9.length;o0>0&&J9.charCodeAt(o0-1)===x;)o0--;var S0=o0<J9.length?J9.slice(0,o0):J9,p9=null;if(S0.length>=3&&S0.charCodeAt(0)===q0){var U9=S0[1];(U9===" "||U9==="x"||U9==="X")&&S0.charCodeAt(2)===u0&&(p9={type:_.gfmTask,completed:U9==="x"||U9==="X"},S0=S0.slice(3))}var v0;if(P9.isEmpty&&S0.trim()==="")v0=[];else if(U0){var I$=Z.inList;Z.inList=!0,v0=v9(S0,Z,Q),Z.inList=I$}else{var P$=Z.inList;if(Z.inList=!0,v0=v9(S0,Z,Q),Z.inList=P$,v0.length===1&&v0[0].type===_.paragraph)v0=v0[0].children;else{for(var O9=[],r0=0;r0<v0.length;r0++)if(v0[r0].type===_.paragraph)for(var F9=v0[r0].children,t9=0;t9<F9.length;t9++)O9.push(F9[t9]);else O9.push(v0[r0]);v0=O9}}p9?X9.push([p9,{type:_.text,text:" "},...v0]):X9.push(v0)}return{node:{type:Y.ordered?_.orderedList:_.unorderedList,start:Y.ordered?Y.start:void 0,items:X9},end:V}}var B$=new Set(["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]);function B9($,J,Z){let Q={};for(let[F,V]of Object.entries($)){let G=F,K=F.toLowerCase();if(K==="style"&&typeof V=="string"){let q={},W=[],O=0,U=0;for(let H=0;H<V.length;H++){let z=V.charCodeAt(H);z===s0?O++:z===t0?O--:z===z$&&O===0&&(W.push(V.slice(U,H)),U=H+1)}U<V.length&&W.push(V.slice(U));let j=!1;W.forEach(H=>{let z=H.indexOf(":");if(z===-1)return;let D=H.slice(0,z).trim(),A=H.slice(z+1).trim();if(D&&A){if(/url\s*\(\s*(javascript|vbscript|data:(?!image\/))/i.test(A)){j=!0;return}let B=D.indexOf("-")!==-1?D.replace(/-([a-z])/g,(k,I)=>I.toUpperCase()):D;q[B]=A}}),!j&&Object.keys(q).length>0&&(Q[G]=q)}else if((K==="href"||K==="src")&&Z?.sanitizer){let q=Z.sanitizer(V,J,K);q!==null&&(Q[G]=q)}else if(V==="")Q[G]=!0;else if(V.length>=2&&V.charCodeAt(0)===j9&&V.charCodeAt(V.length-1)===Z$){var X=V.slice(1,-1);if(X.length>0){var Y=X.charCodeAt(0);if(Y===q0||Y===j9)try{Q[G]=JSON.parse(X);continue}catch{}}if(X==="true"){Q[G]=!0;continue}if(X==="false"){Q[G]=!1;continue}if(Z?.evalUnserializableExpressions)try{Q[G]=(0,eval)("("+X+")");continue}catch{}Q[G]=X}else Q[G]=V}return Q}function A9($,J,Z){let Q=J.length;var X=J.charCodeAt(0);X>=o&&X<=a&&(X+=K9);for(let F=Z;F<=$.length-Q;F++){var Y=$.charCodeAt(F);if(Y>=o&&Y<=a&&(Y+=K9),Y!==X)continue;let V=!0;for(let G=1;G<Q;G++){let K=$.charCodeAt(F+G),q=J.charCodeAt(G);if(K>=o&&K<=a&&(K+=K9),q>=o&&q<=a&&(q+=K9),K!==q){V=!1;break}}if(V)return F}return-1}function PZ($,J,Z){let Q=J.length;var X=J.charCodeAt(0);X>=o&&X<=a&&(X+=K9);for(let F=Math.min(Z,$.length-Q);F>=0;F--){var Y=$.charCodeAt(F);if(Y>=o&&Y<=a&&(Y+=K9),Y!==X)continue;let V=!0;for(let G=1;G<Q;G++){let K=$.charCodeAt(F+G),q=J.charCodeAt(G);if(K>=o&&K<=a&&(K+=K9),q>=o&&q<=a&&(q+=K9),K!==q){V=!1;break}}if(V)return F}return-1}var u$=-1;function y6($,J,Z){let Q=Z.toLowerCase(),X="<"+Q,Y="</"+Q,F=1,V=J,G=$.length;for(u$=-1;V<G&&F>0;){let W=A9($,X,V),O=A9($,Y,V);if(O===-1)return-1;if(W!==-1&&W<O){let U=M9($,W);U?(U.tag.toLowerCase()===Q&&!U.isClosing&&!U.selfClosing&&!h9(U.tag)&&F++,V=U.end):V=W+1}else{var K=O+Y.length,q=K<G?$.charCodeAt(K):62;if((q===u||q===P||q===N||q===x)&&(F--,F===0)){u$=O;let U=O+Y.length;for(;U<G&&$.charCodeAt(U)!==u;)U++;return U+1}V=O+1}}return-1}function L6($,J,Z,Q){if(Q.ignoreHTMLBlocks||Q.disableParsingRawHTML)return null;var X=Y0($,J);if(M0($,J,X),Q0>3&&!Z.inHTML)return null;var Y=J+$0;if($.charCodeAt(Y)!==K0)return null;var F=$.indexOf(">",Y+1);if(F!==-1&&F<X){var V=$.slice(Y+1,F);if(/^[a-zA-Z][a-zA-Z0-9+.-]*:/.test(V)||/^[^\s@]+@[^\s@]+$/.test(V))return null}var G=NZ($,Y);if(G>=1&&G<=5){var K=$.length;if(G===1){for(var q=$.length,W=0;W<C$.length;W++){var O=A9($,"</"+C$[W]+">",Y);O>=0&&O<q&&(q=O)}if(q<$.length){var U=$.indexOf(">",q);K=U>=0?r($,U+1):$.length}}else{var j=G===2?"-->":G===3?"?>":G===4?">":"]]>",H=$.indexOf(j,Y);H>=0&&(K=r($,H+j.length))}var z=$.slice(Y,K);if(G>=2)return{node:{type:_.htmlComment,text:z,raw:!0,endPos:K},end:K};var D="div",A=z.match(/^<\/?([a-zA-Z][a-zA-Z0-9-]*)/);A&&(D=A[1]);var B=M9($,Y),k={},I;B&&!B.isClosing&&(k=B9(B.attrs,D,Q),I=B.whitespaceBeforeAttrs+B.rawAttrs);var v=[],L=D.toLowerCase(),y="</"+L,R=A9(z,y,0),b=z,w="";if(B&&B.isClosing)for(b=z.slice(B.end-Y);b.length>0&&b.charCodeAt(b.length-1)===x;)b=b.slice(0,-1);else if(B&&!B.isClosing){var S=B.end-Y;if(R!==-1)for(b=z.slice(S),b.charCodeAt(0)===x&&(b=b.slice(1));b.length>0&&b.charCodeAt(b.length-1)===x;)b=b.slice(0,-1);else for(b=z;b.length>0&&b.charCodeAt(b.length-1)===x;)b=b.slice(0,-1);if(R!==-1){var E=z.slice(S,R);w=E.trim()}}var h=B?B.isClosing:!1;return{node:{type:_.htmlBlock,tag:D,attrs:k,e:I,children:v,a:b,text:w,d:!0,c:h,endPos:K,canInterruptParagraph:!0},end:K}}if(G===6||G===7){var T=H6($,J),g=T<$.length?T:$.length,I0=$.slice(Y,g),c=T<$.length?r($,T):$.length,m=M9($,Y);if(m){var J0=m.tag,A0=J0.toLowerCase(),m0=m.isClosing;if(m0){var z0=$.slice(m.end,g);return{node:{type:_.htmlBlock,tag:J0,attrs:{},children:[],a:z0,text:z0,d:!0,c:!0,endPos:g,canInterruptParagraph:G===6},end:c}}if(m.selfClosing||h9(J0))return{node:{type:_.htmlBlock,tag:J0,attrs:B9(m.attrs,J0,Q),e:m.whitespaceBeforeAttrs+m.rawAttrs,children:[],a:"",text:"",d:!1,c:!1,endPos:m.end,canInterruptParagraph:G===6},end:r($,m.end)};var P0=Z.b||0,f=$.slice(Y,g),X0=-1,w0=-1;if(P0<10){for(var G0="</"+A0,i=m.end-Y,U0=1,N0=i;N0<f.length&&U0>0;){var M=A9(f,"<"+A0,N0),C=A9(f,G0,N0);if(C===-1)break;if(M!==-1&&M<C){var F0=M+A0.length+1;if(F0<f.length){var y0=f.charCodeAt(F0);(y0===P||y0===N||y0===x||y0===u||y0===j0)&&U0++}N0=M+1}else{var n=C+G0.length;if(n<f.length){var L0=f.charCodeAt(n);if((L0===u||L0===P||L0===N||L0===x)&&(U0--,U0===0)){X0=C;for(var l=n;l<f.length&&f.charCodeAt(l)!==u;)l++;w0=l+1;break}}else if(U0--,U0===0){X0=C,w0=f.length;break}N0=C+1}}var c0=!1;if(X0===-1&&G===6&&!m.isClosing&&!BZ.has(A0)){var l0=$.slice(m.end),T0=A9(l0,G0,0);if(T0!==-1){var V0=l0.slice(0,T0);if(V0.indexOf(`

`)!==-1){for(var C9=m.end+T0,Z9=C9+G0.length;Z9<$.length&&$.charCodeAt(Z9)!==u;)Z9++;if(Z9<$.length&&$.charCodeAt(Z9)===u){var S9=Z9+1,u9=Y0($,S9);g=u9,c=r($,u9),f=$.slice(Y,g),I0=$.slice(Y,g),X0=C9-Y,w0=S9-Y,c0=!0}}}}}var I9=m.rawAttrs.indexOf(`
`)!==-1||m.whitespaceBeforeAttrs.indexOf(`
`)!==-1,Q9=!1;if(X0!==-1){var Y$=f.slice(w0).trim();Q9=Y$.length===0}var X9=!1,V9=g,P9=c;if(X0!==-1){var J9=Y+w0,o0=Y0($,J9-1);if(J9<o0){for(var S0=J9;S0<o0&&($.charCodeAt(S0)===P||$.charCodeAt(S0)===N);)S0++;if(S0<o0&&$.charCodeAt(S0)===K0){var p9=M9($,S0);p9&&!p9.isClosing&&(X9=!0,V9=J9,P9=J9,Q9=!0)}}if(!X9){var U9=r($,o0);if(U9<g){for(var v0=U9;v0<g&&($.charCodeAt(v0)===P||$.charCodeAt(v0)===N);)v0++;if(v0<g&&$.charCodeAt(v0)===K0){var I$=M9($,v0);I$&&(X9=!0,V9=o0,P9=U9,Q9=!0)}}}if(!X9&&Z.inHTML){X9=!0,V9=o0,P9=r($,o0);var P$=$.slice(J9,o0).trim();Q9=P$.length===0}}var O9=[],r0="";if(X0!==-1){r0=f.slice(m.end-Y,X0);var F9=r0.trim();if(F9){var{inline:t9,inHTML:x6,b:f6}=Z;Z.inHTML=!0,Z.b=P0+1;var T6=A0==="p";if(T6)Z.inline=!0,O9=d0(F9,0,F9.length,Z,Q);else{var h6=r0.indexOf(`

`)!==-1,m6=/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m.test(F9),l$=/^<([a-z][^ >/\n\r]*) ?([^>]*?)>/im.test(F9),C6=h6||m6||Z.inHTML&&l$;C6||l$?(Z.inline=!1,O9=v9(r0,Z,Q)):(Z.inline=!0,O9=d0(F9,0,F9.length,Z,Q))}Z.inline=t9,Z.inHTML=x6,Z.b=f6}}var o$=!1;if(G===6&&X0!==-1&&!Z.inHTML&&!I9){var N$=r0,u6=/<[a-zA-Z][^>]*>/.test(N$),p6=/\n\n/.test(N$)||/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m.test(N$);u6&&!p6&&(o$=!0)}var d6=Z.inHTML||G===7||I9||!Q9||o$;if(d6){var a0;if(X0!==-1&&X9){var r$=!1;if(Z.inHTML&&w0<f.length){for(var K$=w0;K$<f.length&&f.charCodeAt(K$)!==x;)K$++;var b$=f.slice(w0,K$).trim();r$=b$.length>1&&b$.charCodeAt(0)===K0&&b$.charCodeAt(1)!==j0}a0=r$?f.slice(m.end-Y):r0}else(G===7||Z.inHTML)&&X0!==-1?(a0=f.slice(m.end-Y),a0.charCodeAt(0)===x&&(a0=a0.slice(1))):X9?a0=$.slice(Y,V9):I9?a0=I0:(a0=f.slice(m.end-Y),a0.charCodeAt(0)===x&&(a0=a0.slice(1)));return{node:{type:_.htmlBlock,tag:J0,attrs:B9(m.attrs,J0,Q),e:m.whitespaceBeforeAttrs+m.rawAttrs,children:O9,a:a0,text:a0,d:!0,c:!1,endPos:V9,canInterruptParagraph:G===6},end:P9}}return{node:{type:_.htmlBlock,tag:J0,attrs:B9(m.attrs,J0,Q),e:m.whitespaceBeforeAttrs+m.rawAttrs,children:O9,a:c0?"":r0,text:r0,d:!1,c:!1,endPos:V9,canInterruptParagraph:G===6},end:P9}}var G$=I0.match(/^<(\/?)([a-zA-Z][a-zA-Z0-9-]*)/),c6=G$?G$[2]:"div",i$=G$?G$[1]==="/":!1,R$=I0;if(i$){var a$=I0.indexOf(">");a$!==-1&&(R$=I0.slice(a$+1))}return{node:{type:_.htmlBlock,tag:c6,attrs:{},children:[],a:R$,text:R$,d:!0,c:i$,endPos:g,canInterruptParagraph:G===6},end:c}}var E0=M9($,Y);if(!E0)return null;var N9=E0.tag,w$=N9.toLowerCase(),n$=N9.charCodeAt(0),V$=n$>=o&&n$<=a;if(!V$&&!B$.has(w$)&&!X$.has(w$)&&!w$.includes("-"))return null;if(E0.isClosing)return{node:{type:_.htmlSelfClosing,tag:N9,attrs:{},endPos:E0.end,c:!0,a:$.slice(Y,E0.end)},end:E0.end};var eZ=!0,E9=y6($,E0.end,N9),e9=[];if(E9!==-1){var l6=u$,F$=$.slice(E0.end,l6),$$=F$.trim();if($$){var o6=F$.indexOf(`

`)!==-1,r6=/^(\s{0,3}#[#\s]|\s{0,3}[-*+]\s|\s{0,3}\d+\.\s|\s{0,3}>\s|\s{0,3}```)/m.test($$),i6=/^<([a-z][^ >/\n\r]*) ?([^>]*?)>/im.test($$),a6=Z.inline,n6=Z.inHTML,s6=Z.b;Z.inHTML=!0,Z.b=(Z.b||0)+1,o6||r6||i6?(Z.inline=!1,e9=v9(F$,Z,Q)):(Z.inline=!0,e9=d0($$,0,$$.length,Z,Q)),Z.inline=a6,Z.inHTML=n6,Z.b=s6}var t6=Y0($,E9),e6=$.slice(E9,t6).trim(),y$=e6?E9:r($,E9),s$=V$?$.slice(Y,E9):$.slice(Y,y$),$Z=V$?E9:y$;return{node:{type:_.htmlBlock,tag:N9,attrs:B9(E0.attrs,N9,Q),e:E0.whitespaceBeforeAttrs+E0.rawAttrs,children:e9,a:s$,text:V$?F$:s$,d:!0,c:!1,endPos:$Z,canInterruptParagraph:!1},end:y$}}var d9=H6($,E0.end),ZZ=d9<$.length?r($,d9):d9,L$=$.slice(E0.end,d9);if(L$.trim()){var{inline:JZ,inHTML:QZ,b:XZ}=Z;Z.inline=!1,Z.inHTML=!0,Z.b=(Z.b||0)+1,e9=v9(L$,Z,Q),Z.inline=JZ,Z.inHTML=QZ,Z.b=XZ}var YZ=$.slice(E0.end,d9);return{node:{type:_.htmlBlock,tag:N9,attrs:B9(E0.attrs,N9,Q),e:E0.whitespaceBeforeAttrs+E0.rawAttrs,children:e9,a:YZ,text:L$,d:!0,c:!1,endPos:d9,canInterruptParagraph:!1},end:ZZ}}function NZ($,J){if($.charCodeAt(J)!==K0)return 0;var Z=J+1,Q=$.length;if($.charCodeAt(Z)===g0&&$.charCodeAt(Z+1)===p&&$.charCodeAt(Z+2)===p)return 2;if($.charCodeAt(Z)===g9)return 3;if($.charCodeAt(Z)===g0){var X=$.charCodeAt(Z+1);if(X>=o&&X<=a)return 4;if($.slice(Z+1,Z+8)==="[CDATA[")return 5}for(var Y=$.charCodeAt(Z)===j0,F=Y?Z+1:Z,V=F;V<Q;){var G=$.charCodeAt(V);if(G>=o&&G<=a||G>=W0&&G<=D0||G>=s&&G<=t||G===p)V++;else break}if(V===F)return 0;var K=$.slice(F,V);if(X$.has(K.toLowerCase())){if(Y)return 0;var q=$.charCodeAt(V);return q===P||q===N||q===u||q===x||V>=Q?1:0}if(B$.has(K.toLowerCase())){if(Y){for(var W=V;W<Q&&($.charCodeAt(W)===P||$.charCodeAt(W)===N);)W++;return W<Q&&$.charCodeAt(W)===u?6:0}var O=V<Q?$.charCodeAt(V):-1;return O===P||O===N||O===u||O===x||O===j0||O===-1?6:0}if(Y){for(var z=V;z<Q&&($.charCodeAt(z)===P||$.charCodeAt(z)===N);)z++;if(z<Q&&$.charCodeAt(z)===u){var D=Y0($,J),A=$.slice(z+1,D).trim();if(A==="")return 7}}else{var U=Y0($,J),j=M9($,J);if(j&&j.end<=U){var H=$.slice(j.end,U).trim();if(H==="")return 7}}return 0}function j6($,J,Z){for(var Q=0,X=$.length;Q<X&&($.charCodeAt(Q)===P||$.charCodeAt(Q)===N);)Q++;for(;X>Q&&($.charCodeAt(X-1)===P||$.charCodeAt(X-1)===N);)X--;Q<X&&$.charCodeAt(Q)===b0&&Q++,X>Q&&$.charCodeAt(X-1)===b0&&(X-2<Q||$.charCodeAt(X-2)!==B0)&&X--;for(var Y=[],F=Q,V=!1,G=[],K=Q;K<X;){var q=$.charCodeAt(K);if(q===B0&&K+1<X){$.charCodeAt(K+1)===b0?(V||(V=!0,G=[]),G.push($.slice(F,K)),G.push("|"),K+=2,F=K):K+=2;continue}if(q===e){for(var W=0;K<X&&$.charCodeAt(K)===e;)W++,K++;for(var O=!1;K<X&&!O;){for(var U=0;K<X&&$.charCodeAt(K)===e;)U++,K++;U===W?O=!0:U===0&&K++}continue}if(q===b0){var j=V?(G.push($.slice(F,K)),G.join("")):$.slice(F,K);Y.push(j.trim()),K++,F=K,V=!1,G=[];continue}K++}var H=V?(G.push($.slice(F,X)),G.join("")):$.slice(F,X);return Y.push(H.trim()),Y.map(function(z){var D=z.indexOf("\\|")!==-1?z.replace(/\\\|/g,"|"):z;return d0(D,0,D.length,J,Z)})}function B6($,J,Z,Q){let X=Y0($,J);var Y=$.indexOf("|",J);if(Y<0||Y>=X)return null;let F=r($,X);if(F>=$.length)return null;let V=Y0($,F);if(!I6($,F,V))return null;let G=$.slice(J,X),K=$.slice(F,V);for(var q=[],W=0,O=K.length;W<O&&(K.charCodeAt(W)===P||K.charCodeAt(W)===N);)W++;for(W<O&&K.charCodeAt(W)===b0&&W++;W<O;){for(;W<O&&(K.charCodeAt(W)===P||K.charCodeAt(W)===N);)W++;if(W>=O||K.charCodeAt(W)===b0)break;var U=K.charCodeAt(W)===x0;for(U&&W++;W<O&&K.charCodeAt(W)===p;)W++;var j=W<O&&K.charCodeAt(W)===x0;for(j&&W++,q.push(U&&j?"center":j?"right":U?"left":null);W<O&&(K.charCodeAt(W)===P||K.charCodeAt(W)===N);)W++;W<O&&K.charCodeAt(W)===b0&&W++}let H=j6(G,Z,Q);if(q.length!==H.length)return null;let z=[],D=r($,V);for(;D<$.length;){let L=Y0($,D),y=$.slice(D,L);if($9($,D,L))break;if(M0($,D,L),Q0<4){var A=$.charCodeAt(D+$0);if(A===u||A===Y9||(A===p||A===O0||A===H0)&&L9($,D))break;if(A===e||A===_0){for(var B=D+$0,k=0;B<L&&$.charCodeAt(B)===A;)k++,B++;if(k>=3)break}}z.push(j6(y,Z,Q)),D=r($,L)}if((Q.streaming||Q.optimizeForStreaming)&&z.length===0)return null;for(var I=H.length,v=0;v<z.length;v++)if(z[v].length<I)for(;z[v].length<I;)z[v].push([]);else z[v].length>I&&(z[v].length=I);return{node:{type:_.table,header:H,cells:z,align:q},end:D}}function bZ($,J,Z){var Q=Y0($,J);if(M0($,J,Q),Q0>3)return null;var X=J+$0;if($.charCodeAt(X)!==q0)return null;if(X+1<$.length&&$.charCodeAt(X+1)===i0){var Y=RZ($,X,Z);return Y||null}Z.refs||(Z.refs={});var F=P6($,X,Z.refs);return F===null?null:{node:{type:_.refCollection},end:F}}function RZ($,J,Z){var Q=$.length;if($.charCodeAt(J)!==q0||J+1>=Q||$.charCodeAt(J+1)!==i0)return null;for(var X=J+2,Y=X;X<Q&&$.charCodeAt(X)!==u0;){if($.charCodeAt(X)===x)return null;X++}if(X>=Q)return null;var F=("^"+$.slice(Y,X)).toLowerCase();if(X++,X>=Q||$.charCodeAt(X)!==x0)return null;for(X++;X<Q&&($.charCodeAt(X)===P||$.charCodeAt(X)===N);)X++;if(X<Q&&$.charCodeAt(X)===x)for(X++;X<Q&&($.charCodeAt(X)===P||$.charCodeAt(X)===N);)X++;var V=$.indexOf(`
`,X);V<0&&(V=Q);for(var G=$.slice(X,V).trim(),K=V<Q?V+1:Q;K<Q;){var q=Y0($,K);if(M0($,K,q),Q0>=2&&!$9($,K,q))G+=`
`+$.slice(K,q),K=r($,q);else if($9($,K,q)){var W=r($,q);if(W<Q){var O=Y0($,W);if(M0($,W,O),Q0>=2){G+=`
`,K=r($,q);continue}}break}else break}return Z.refs[F]||(Z.refs[F]={target:G,title:void 0}),{node:{type:_.footnote},end:K}}function wZ($,J,Z,Q){let X=J,Y=0,F=0,V=-1;for(;X<$.length;){let w=V>=0?V:Y0($,X);if(V=-1,$9($,X,w))break;if(M0($,X,w),Q0<4&&F>0&&!Z.f){let E=$.charCodeAt(X+$0);if(E===C0||E===p){let h=X+$0;for(;h<w&&$.charCodeAt(h)===E;)h++;for(;h<w&&($.charCodeAt(h)===P||$.charCodeAt(h)===N);)h++;if(h>=w){Y=E===C0?1:2,X=r($,w);break}}}F=w;let S=r($,w);if(S<$.length){if($.charCodeAt(S)===r9){var G=Y0($,S);X=r($,G),F=G;continue}let E=Y0($,S);if(V=E,M0($,S,E),Q0<4){let h=$.charCodeAt(S+$0);if(h===u){X=S;break}if(h===Y9&&R6($,S,Z,Q)){X=S;break}if(h===e||h===_0){for(var K=S+$0,q=0;K<E&&$.charCodeAt(K)===h;)q++,K++;if(q>=3){X=S;break}}if(h===K0){var W=S+$0+1,O=W<E?$.charCodeAt(W):0,U=O===g0||O===g9;if(!U&&O===j0){for(var j=W+1,H=j;H<E&&($.charCodeAt(H)>=o&&$.charCodeAt(H)<=a||$.charCodeAt(H)>=W0&&$.charCodeAt(H)<=D0||$.charCodeAt(H)>=s&&$.charCodeAt(H)<=t||$.charCodeAt(H)===p);)H++;H>j&&(U=B$.has($.slice(j,H).toLowerCase()))}else if(!U){for(var z=W;z<E&&($.charCodeAt(z)>=o&&$.charCodeAt(z)<=a||$.charCodeAt(z)>=W0&&$.charCodeAt(z)<=D0||$.charCodeAt(z)>=s&&$.charCodeAt(z)<=t||$.charCodeAt(z)===p);)z++;if(z>W){var D=$.slice(W,z).toLowerCase();U=B$.has(D)||X$.has(D)}}if(U&&L6($,S,Z,Q)){X=S;break}}if(h===p||h===O0||h===D9){let T=S+$0+1;if(T<E&&($.charCodeAt(T)===P||$.charCodeAt(T)===N)){var A=Q$($,T,E);if(A<E&&!L9($,S)){X=S;break}}}if(h>=s&&h<=t){let T=S+$0;for(;T<E&&$.charCodeAt(T)>=s&&$.charCodeAt(T)<=t;)T++;if(T<E&&($.charCodeAt(T)===n0||$.charCodeAt(T)===t0)&&T-(S+$0)===1&&$.charCodeAt(S+$0)===49){var B=T+1;if(B<E&&($.charCodeAt(B)===P||$.charCodeAt(B)===N)){var k=Q$($,B,E);if(k<E){X=S;break}}}}if(h===b0){let T=r($,E);if(T<$.length){let g=Y0($,T);if(I6($,T,g)){X=S;break}}}if((h===p||h===O0||h===H0)&&L9($,S)){if(h!==p){X=S;break}let T=0,g=S+$0;for(;g<E&&$.charCodeAt(g)===p;)T++,g++;for(;g<E&&($.charCodeAt(g)===P||$.charCodeAt(g)===N);)g++;if(g<E){X=S;break}}}}X=r($,w)}for(var I=Y?F:X;I>J&&($.charCodeAt(I-1)===x||$.charCodeAt(I-1)===q9||$.charCodeAt(I-1)===P||$.charCodeAt(I-1)===N);)I--;for(var v=J;v<I&&($.charCodeAt(v)===P||$.charCodeAt(v)===N);)v++;if(v>=I)return null;for(var L=!1,y=v;y<I;y++)if($.charCodeAt(y)===r9){L=!0;break}var R=L?$.slice(v,I).replace(/\u001E/g,""):$.slice(v,I);if(!R)return null;let b=yZ(R,0,R.length,Z,Q);if(Y){let S=(Q?.slugify||e0)(R);return{node:{type:_.heading,level:Y,children:b,id:S},end:X}}return{node:{type:_.paragraph,children:b},end:X}}function yZ($,J,Z,Q,X){var Y=$.indexOf(`
`,J);if(Y<0||Y>=Z)return d0($,J,Z,Q,X);for(var F="",V=J,G=J;G<Z;){var K=$.charCodeAt(G);if(K===e){var q=v$($,G,Z);if(q>G){for(var W=!1,O=G;O<q;O++)if($.charCodeAt(O)===x){W=!0;break}W&&(F+=$.slice(V,G),F+=$.slice(G,q).replace(/\n/g," "),V=q),G=q;continue}}if(K===K0){var U=k6($,G,Z);if(U>G){G=U;continue}}if(K===x){var j=!1,H=0;if(G>J&&$.charCodeAt(G-1)===B0)j=!0,H=1;else{for(var z=0,D=G-1;D>=J&&$.charCodeAt(D)===P;)z++,D--;z>=2&&(j=!0,H=z)}for(j?(F+=$.slice(V,G-H),F+=""):F+=$.slice(V,G+1),G++;G<Z&&$.charCodeAt(G)===P;)G++;V=G;continue}G++}return V<Z&&(F+=$.slice(V,Z)),d0(F,0,F.length,Q,X)}function LZ($,J,Z){if($.charCodeAt(J)!==e)return null;let Q=_9($,J,Z,96),X=J+Q;for(;X<Z;){let Y=$.indexOf("`",X);if(Y<0||Y>=Z)return null;let F=_9($,Y,Z,96);if(F===Q){let V=$.slice(J+Q,Y);return V=V.replace(/\n/g," "),V.length>0&&V[0]===" "&&V[V.length-1]===" "&&V.trim().length>0&&(V=V.slice(1,-1)),{node:{type:_.codeInline,text:V},end:Y+F}}X=Y+F}return null}function v$($,J,Z){if($.charCodeAt(J)!==e)return J;let Q=_9($,J,Z,96),X=J+Q;for(;X<Z;){let Y=$.indexOf("`",X);if(Y<0||Y>=Z)return J;let F=_9($,Y,Z,96);if(F===Q)return Y+F;X=Y+F}return J}function k6($,J,Z){if($.charCodeAt(J)!==K0)return J;if(J+1<Z&&$.charCodeAt(J+1)===j0){let K=J+2;for(;K<Z&&$.charCodeAt(K)!==u;)K++;return K<Z?K+1:J}if(J+3<Z&&$.charCodeAt(J+1)===g0&&$.charCodeAt(J+2)===p&&$.charCodeAt(J+3)===p){let K=$.indexOf("-->",J+4);return K>=0?K+3:J}let Q=J+1,X=Q;for(;Q<Z;){let K=$.charCodeAt(Q);if(K>=o&&K<=a||K>=W0&&K<=D0||K>=s&&K<=t||K===p)Q++;else break}if(Q===X)return J;let Y=$.slice(X,Q).toLowerCase(),F=!1;for(;Q<Z;){let K=$.charCodeAt(Q);if(K===u){Q++;break}if(K===j0&&Q+1<Z&&$.charCodeAt(Q+1)===u){Q+=2,F=!0;break}if(K===W9||K===H9){var V=K;for(Q++;Q<Z&&$.charCodeAt(Q)!==V;)Q++;Q<Z&&Q++;continue}if(K===x)return J;Q++}if(F||h9(Y))return Q;let G=1;for(;Q<Z&&G>0;)if($.charCodeAt(Q)===K0)if(Q+1<Z&&$.charCodeAt(Q+1)===j0){let K=Q+2,q=K;for(;q<Z&&($.charCodeAt(q)>=o&&$.charCodeAt(q)<=a||$.charCodeAt(q)>=W0&&$.charCodeAt(q)<=D0);)q++;if($.slice(K,q).toLowerCase()===Y){for(;q<Z&&$.charCodeAt(q)!==u;)q++;if(q<Z&&q++,G--,G===0)return q}Q=q}else{let K=Q+1,q=K;for(;q<Z&&($.charCodeAt(q)>=o&&$.charCodeAt(q)<=a||$.charCodeAt(q)>=W0&&$.charCodeAt(q)<=D0);)q++;$.slice(K,q).toLowerCase()===Y&&G++,Q++}else Q++;return Q}function kZ($,J,Z,Q,X){if($.charCodeAt(J)!==_0||J+1>=Z||$.charCodeAt(J+1)!==_0)return null;let Y=J+2;for(;Y+1<Z;){let F=$.charCodeAt(Y);if(F===e){let V=v$($,Y,Z);if(V>Y){Y=V;continue}}if(F===_0&&$.charCodeAt(Y+1)===_0){let V=$.slice(J+2,Y),G=d0(V,0,V.length,Q,X);return{node:{type:_.textFormatted,tag:"del",children:G},end:Y+2}}F===B0&&Y+1<Z&&Y++,Y++}return null}function SZ($,J,Z,Q,X){if($.charCodeAt(J)!==C0||J+1>=Z||$.charCodeAt(J+1)!==C0)return null;let Y=J+2;for(;Y+1<Z;){let F=$.charCodeAt(Y);if(F===e){let V=v$($,Y,Z);if(V>Y){Y=V;continue}}if(F===C0&&$.charCodeAt(Y+1)===C0&&Y>J+2){let V=$.slice(J+2,Y),G=d0(V,0,V.length,Q,X);return{node:{type:_.textFormatted,tag:"mark",children:G},end:Y+2}}F===B0&&Y+1<Z&&Y++,Y++}return null}var EZ=/[\p{P}\p{S}]/u;function M6($,J,Z){return $<x9?!!(c$($)&Z0):EZ.test(J[Z])}function A6($,J,Z){return $<x9?!!(c$($)&s9):/\p{Zs}/u.test(J[Z])}function gZ($,J,Z){var Q=$.charCodeAt(J);if(Q!==O0&&Q!==H0)return null;var X=_9($,J,Z,Q);if(X===0)return null;var Y=J>0?$.charCodeAt(J-1):32,F=J+X<Z?$.charCodeAt(J+X):32,V=A6(Y,$,J-1),G=A6(F,$,J+X),K=J>0?M6(Y,$,J-1):!1,q=J+X<Z?M6(F,$,J+X):!1,W=!G&&(!q||V||K),O=!V&&(!K||G||q),U,j;return Q===O0?(U=W,j=O):(U=W&&(!O||K),j=O&&(!W||q)),{len:X,canOpen:U,canClose:j}}function xZ($,J,Z,Q){if(J.length!==0){for(var X=[],Y=0;Y<12;Y++)X[Y]=-1;for(var F=0;F<J.length;){var V=J[F];if(!V.active||!V.canClose){F++;continue}for(var G=V.ch===O0?0:1,K=G*6+V.len%3*2+(V.canOpen?1:0),q=X[K]!==void 0?X[K]:-1,W=-1,O=F-1;O>q;O--){var U=J[O];if(!(!U.active||U.ch!==V.ch||!U.canOpen)&&!((V.canOpen||U.canClose)&&(U.len+V.len)%3===0&&U.len%3!==0)){W=O;break}}if(W<0){X[K]=F-1,!V.canOpen&&(V.active=!1),F++;continue}var j=J[W],H=j.len>=2&&V.len>=2,z=H?2:1;j.len-=z,V.len-=z;var D=$[j.idx],A=$[V.idx];D.text=D.text.slice(0,D.text.length-z),A.text=A.text.slice(z);var B=j.idx+1,k=V.idx,I=$.slice(B,k),v={type:_.textFormatted,tag:H?"strong":"em",children:I};$.splice(B,k-B,v);for(var L=k-B-1,y=0;y<J.length;y++)J[y].idx>j.idx&&(J[y].idx-=L);for(var R=W+1;R<F;R++)J[R].active=!1;if(j.len===0&&(j.active=!1,D.text==="")){$.splice(j.idx,1);for(var b=0;b<J.length;b++)J[b].idx>j.idx?J[b].idx--:J[b].idx===j.idx&&(J[b].idx=-1)}if(V.len===0){V.active=!1;var w=V.idx;if(A.text===""){$.splice(w,1);for(var S=0;S<J.length;S++)J[S].idx>w?J[S].idx--:J[S].idx===w&&(J[S].idx=-1)}}else continue;F++}for(var E=0,h=0;h<$.length;h++){var T=$[h];if(T.type===_.text){var g=T;if(g.text==="")continue;if(E>0&&$[E-1].type===_.text){$[E-1].text+=g.text;continue}}$[E++]=T}$.length=E}}function v6($,J,Z,Q,X){let Y=$.charCodeAt(J)===g0,F=Y?J+1:J;if($.charCodeAt(F)!==q0)return null;var V=$.indexOf("]",F+1);if(V<0||V>=Z)return null;for(var G=F+1,K=-1,q=1;G<Z&&q>0;){var W=$.charCodeAt(G);if(W===B0&&G+1<Z){G+=2;continue}if(W===e){var O=v$($,G,Z);if(O>G){G=O;continue}}if(W===K0){var U=S6($,G,Z);if(U){G=U.end;continue}var j=k6($,G,Z);if(j>G){G=j;continue}}W===q0?q++:W===u0&&q--,G++}if(q!==0)return null;var H=G-1,z=$.slice(F+1,H),D=G<Z?$.charCodeAt(G):0,A=!1;if(D===s0){var B=!0;for(G++;G<Z&&($.charCodeAt(G)===P||$.charCodeAt(G)===x);)G++;var k="",I=G;if(G<Z&&$.charCodeAt(G)===K0){for(G++,I=G;I<Z&&$.charCodeAt(I)!==u;){if($.charCodeAt(I)===B0&&I+1<Z){I+=2;continue}if($.charCodeAt(I)===x){B=!1;break}I++}B&&(I>=Z||$.charCodeAt(I)!==u)&&(B=!1),B&&(k=$.slice(G,I),I++)}else if(B){for(var v=0;I<Z;){var L=$.charCodeAt(I);if(L===B0&&I+1<Z){I+=2;continue}if(L===s0)v++;else if(L===t0){if(v===0)break;v--}else if(L===P||L===x)break;I++}k=$.slice(G,I)}if(B){for(G=I;G<Z&&($.charCodeAt(G)===P||$.charCodeAt(G)===x);)G++;var y;if(G<Z){var R=$.charCodeAt(G);if(R===W9||R===H9||R===s0){var b=R===s0?41:R;G++;for(var w=G;G<Z&&$.charCodeAt(G)!==b;)$.charCodeAt(G)===B0&&G+1<Z&&G++,G++;G>=Z?B=!1:(y=$.slice(w,G),G++)}}if(B){for(;G<Z&&($.charCodeAt(G)===P||$.charCodeAt(G)===x);)G++;(G>=Z||$.charCodeAt(G)!==t0)&&(B=!1)}}if(B){G++,k=n9(k),y!==void 0&&(y=H$(n9(y)));var S=X?.sanitizer||T9,E=S(k,Y?"img":"a",Y?"src":"href"),h=E===null?null:k;if(Y){var T=d0(z,0,z.length,Q,X),g=M$(T);return{node:{type:_.image,target:h,alt:g,title:y},end:G}}else{var I0=Q.inAnchor;Q.inAnchor=!0;var c=I0?[{type:_.text,text:z}]:d0(z,0,z.length,Q,X);return Q.inAnchor=I0,!Q.inAnchor&&p$(c)?null:{node:{type:_.link,target:h,title:y,children:c},end:G}}}else G=H+1,A=!0}var m="",J0=G;if(!A&&D===q0){var A0=G+1;J0=A0;for(var m0=!1;J0<Z&&$.charCodeAt(J0)!==u0;){if($.charCodeAt(J0)===B0&&J0+1<Z){J0+=2;continue}if($.charCodeAt(J0)===q0){m0=!0;break}J0++}if(m0||J0>=Z)return null;var z0=$.slice(A0,J0);if(z0.trim())m=D$(z0);else{if(O6(z))return null;m=D$(z)}J0=J0+1}else{if(O6(z))return null;m=D$(z)}var P0=Q.refs[m];if(!P0)return null;if(Y)return{node:{type:_.image,target:P0.target,alt:M$(d0(z,0,z.length,Q,X)),title:P0.title},end:J0};var f=Q.inAnchor;Q.inAnchor=!0;var c=f?[{type:_.text,text:z}]:d0(z,0,z.length,Q,X);return Q.inAnchor=f,!Q.inAnchor&&p$(c)?null:{node:{type:_.link,target:P0.target,title:P0.title,children:c},end:J0}}function S6($,J,Z){if($.charCodeAt(J)!==K0)return null;for(var Q=J+1;Q<Z;){var X=$.charCodeAt(Q);if(X===u)break;if(X===P||X===x||X===q9||X===K0)return null;Q++}if(Q>=Z||$.charCodeAt(Q)!==u)return null;var Y=$.slice(J+1,Q),F=Y.match(/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^\x00-\x20]*)$/);return F?{node:{type:_.link,target:Y,children:[{type:_.text,text:Y}]},end:Q+1}:Y.indexOf("@")!==-1&&/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(Y)?{node:{type:_.link,target:"mailto:"+Y,children:[{type:_.text,text:Y}]},end:Q+1}:null}function fZ($,J,Z,Q){if($.charCodeAt(J)!==q0||J+1>=Z||$.charCodeAt(J+1)!==i0)return null;let X=J+2;for(;X<Z&&$.charCodeAt(X)!==u0&&$.charCodeAt(X)!==x;)X++;if(X>=Z||$.charCodeAt(X)!==u0)return null;let Y=$.slice(J+2,X);return Y?{node:{type:_.footnoteReference,target:"#"+e0(Y),text:Y},end:X+1}:null}function TZ($,J,Z,Q){if(Q.disableBareUrls)return null;var X="",Y=!1,F=$.charCodeAt(J);if(F===o9||F===72?J+8<=Z&&$.charCodeAt(J+1)===W$&&$.charCodeAt(J+2)===W$&&$.charCodeAt(J+3)===S$&&($.charCodeAt(J+4)===e$&&$.charCodeAt(J+5)===x0&&$.charCodeAt(J+6)===j0&&$.charCodeAt(J+7)===j0?X="https://":$.charCodeAt(J+4)===x0&&$.charCodeAt(J+5)===j0&&$.charCodeAt(J+6)===j0&&(X="http://")):F===b9||F===70?J+6<=Z&&$.charCodeAt(J+1)===W$&&$.charCodeAt(J+2)===S$&&$.charCodeAt(J+3)===x0&&$.charCodeAt(J+4)===j0&&$.charCodeAt(J+5)===j0&&(X="ftp://"):(F===R9||F===87)&&J+4<=Z&&$.charCodeAt(J+1)===R9&&$.charCodeAt(J+2)===R9&&$.charCodeAt(J+3)===n0&&(X="www.",Y=!0),!X)return null;let V=J+X.length;for(;V<Z;){let v=$.charCodeAt(V);if(v===P||v===x||v===N||v===q9||v===K0||v===u)break;V++}for(var G=0,K=0,q=J;q<V;q++){var W=$.charCodeAt(q);W===s0?G++:W===t0&&K++}let O=V;for(;O>J+X.length;){let v=$.charCodeAt(O-1);if(v===n0||v===E$||v===x0||v===g0||v===g9||v===t0){if(v===t0){if(G>=K)break;K--}O--}else if(v===z$){for(var U=O-2;U>J&&($.charCodeAt(U)>=o&&$.charCodeAt(U)<=a||$.charCodeAt(U)>=W0&&$.charCodeAt(U)<=D0||$.charCodeAt(U)>=s&&$.charCodeAt(U)<=t);)U--;U>=J&&$.charCodeAt(U)===q$?O=U:O--}else break}if(O<=J+X.length)return null;var j=J+(Y?4:X.length),H=$.indexOf("/",j);if((H<0||H>O)&&(H=O),Y&&$.indexOf(".",j)===-1)return null;for(var z=-1,D=-1,A=H-1;A>=j;A--)if($.charCodeAt(A)===n0)if(z<0)z=A;else{D=A;break}for(var B=D>=0?D+1:j,A=B;A<H;A++)if($.charCodeAt(A)===H0)return null;var k=$.slice(J,O),I=Y?"http://"+k:k;return{node:{type:_.link,target:I,children:[{type:_.text,text:k}]},end:O}}function hZ($,J,Z,Q){if(Q.disableBareUrls)return null;for(var X=J,Y=X;X<Z;){var F=$.charCodeAt(X);if(F>=o&&F<=a||F>=W0&&F<=D0||F>=s&&F<=t||F===n0||F===g0||F===Y9||F===36||F===c9||F===q$||F===H9||F===O0||F===D9||F===j0||F===C0||F===g9||F===i0||F===H0||F===e||F===j9||F===b0||F===Z$||F===_0||F===p)X++;else break}if(X===Y||X>=Z||$.charCodeAt(X)!==l9)return null;X++;for(var V=X,G=-1,K=X;X<Z;){var F=$.charCodeAt(X);if(F>=o&&F<=a||F>=W0&&F<=D0||F>=s&&F<=t)X++;else if((F===p||F===H0)&&X>V)X++;else if(F===n0){if(X===V)break;var q=$.charCodeAt(X-1);if(q===p||q===H0||X-K>63)break;if(X+1<Z){var W=$.charCodeAt(X+1);if(W>=o&&W<=a||W>=W0&&W<=D0||W>=s&&W<=t)G=X,K=X+1,X++;else break}else break}else break}if(X-K>63||G<0)return null;var O=$.charCodeAt(X-1);if(!(O>=o&&O<=a||O>=W0&&O<=D0||O>=s&&O<=t)||X<=G+1)return null;for(var U=-1,j=G-1;j>=V;j--)if($.charCodeAt(j)===n0){U=j;break}for(var H=U>=0?U+1:V,j=H;j<X;j++)if($.charCodeAt(j)===H0)return null;var z=$.slice(J,X);return{node:{type:_.link,target:"mailto:"+z,children:[{type:_.text,text:z}]},end:X}}function p$($){for(var J=0;J<$.length;J++)if($[J].type===_.link||"children"in $[J]&&Array.isArray($[J].children)&&p$($[J].children))return!0;return!1}function M$($){for(var J="",Z=0;Z<$.length;Z++){var Q=$[Z];Q.type===_.text?J+=Q.text:Q.type===_.breakLine?J+=" ":Q.type===_.codeInline?J+=Q.text:"children"in Q&&Array.isArray(Q.children)?J+=M$(Q.children):Q.type===_.image?J+=Q.alt||"":Q.type===_.link&&(J+=M$(Q.children))}return J}function m9($){let J=$.includes("&")?H$($):$;return{type:_.text,text:J}}function mZ($,J,Z,Q,X){if($.charCodeAt(J)!==K0)return null;var Y=J+1;if(Y>=Z)return null;var F=$.charCodeAt(Y);if(F===g0&&Y+1<Z&&$.charCodeAt(Y+1)===p&&Y+2<Z&&$.charCodeAt(Y+2)===p){var V=Y+3;if(V<Z&&$.charCodeAt(V)===u)return{node:{type:_.htmlComment,text:"",endsWithGreaterThan:!0},end:V+1};if(V+1<Z&&$.charCodeAt(V)===p&&$.charCodeAt(V+1)===u)return{node:{type:_.htmlComment,text:"-",endsWithGreaterThan:!0},end:V+2};var G=$.indexOf("-->",V);return G!==-1&&G<=Z-3?{node:{type:_.htmlComment,text:$.slice(J+4,G)},end:G+3}:null}if(F===g9){var K=$.indexOf("?>",Y+1);return K!==-1&&K<Z?{node:{type:_.htmlSelfClosing,tag:"?",attrs:{},a:$.slice(J,K+2)},end:K+2}:null}if(F===g0&&Y+1<Z){var q=$.charCodeAt(Y+1);if(q===q0&&$.slice(Y+1,Y+8)==="[CDATA["){var W=$.indexOf("]]>",Y+8);return W!==-1&&W<Z?{node:{type:_.htmlSelfClosing,tag:"![CDATA[",attrs:{},a:$.slice(J,W+3)},end:W+3}:null}if(q>=o&&q<=a){var O=$.indexOf(">",Y+2);return O!==-1&&O<Z?{node:{type:_.htmlSelfClosing,tag:"!"+$.slice(Y+1,O),attrs:{},a:$.slice(J,O+1)},end:O+1}:null}}if(F===j0){var U=Y+1;if(U>=Z)return null;var j=$.charCodeAt(U);if(!(j>=o&&j<=a||j>=W0&&j<=D0))return null;for(U++;U<Z;){var H=$.charCodeAt(U);if(H>=o&&H<=a||H>=W0&&H<=D0||H>=s&&H<=t||H===p)U++;else break}for(;U<Z&&($.charCodeAt(U)===P||$.charCodeAt(U)===N||$.charCodeAt(U)===x);)U++;if(U<Z&&$.charCodeAt(U)===u){var z=$.slice(Y+1,U).trim();return{node:{type:_.htmlSelfClosing,tag:z,attrs:{},a:$.slice(J,U+1),c:!0},end:U+1}}return null}if(!(F>=o&&F<=a||F>=W0&&F<=D0))return null;var D=M9($,J);if(!D)return null;var A=D.tag,B=A.toLowerCase(),k=D.selfClosing;if(k||h9(A))return{node:{type:_.htmlSelfClosing,tag:A,attrs:B9(D.attrs,A,X),a:$.slice(J,D.end)},end:D.end};var I=X$.has(B),v=y6($.slice(0,Z),D.end,A);if(v===-1)return{node:{type:_.htmlSelfClosing,tag:A,attrs:B9(D.attrs,A,X),a:$.slice(J,D.end)},end:D.end};var L=PZ($,"</"+B,v),y=$.slice(D.end,L),R=[];if(I)y.trim()&&(R=[{type:_.text,text:y}]);else{var b=y.trim();if(b){var{inAnchor:w,inline:S}=Q;B==="a"&&(Q.inAnchor=!0);var E=b.indexOf(`

`)!==-1||/^#{1,6}\s/.test(b);E?(Q.inline=!1,R=v9(b,Q,X)):R=d0(b,0,b.length,Q,X),Q.inAnchor=w,Q.inline=S}}return{node:{type:_.htmlBlock,tag:A,attrs:B9(D.attrs,A,X),e:D.rawAttrs,children:R,text:y,d:!1},end:v}}var CZ=200,a9=0;function d0($,J,Z,Q,X){if(a9++,a9>CZ)return a9--,[{type:_.text,text:$.slice(J,Z)}];let Y=Q;if(X.streaming||X.optimizeForStreaming){let n=function(l,c0){for(var l0=1,T0=c0+1;T0<l.length;T0++){var V0=l.charCodeAt(T0);if(V0===q0)l0++;else if(V0===u0&&(l0--,l0===0))return T0}return-1},M=$.slice(J,Z),C=M;for(var F=0,V=0,G=0,K=0,q=0,W=-1,O=-1,U=-1,j=-1,H=-1,z=0;z<M.length;z++){var D=M.charCodeAt(z);D===O0?z+1<M.length&&M.charCodeAt(z+1)===O0?(F++,W=z,z++):(V++,O=z):D===H0?z+1<M.length&&M.charCodeAt(z+1)===H0?(G++,U=z,z++):(K++,j=z):D===_0&&z+1<M.length&&M.charCodeAt(z+1)===_0&&(q++,H=z,z++)}var A=[];q%2===1&&H>=0&&A.push([H,2]),G%2===1&&U>=0&&A.push([U,2]),K%2===1&&j>=0&&A.push([j,1]),F%2===1&&W>=0&&A.push([W,2]),V%2===1&&O>=0&&A.push([O,1]),A.sort(function(l,c0){return c0[0]-l[0]});for(var B=0;B<A.length;B++){var k=A[B][0],I=A[B][1];M=M.slice(0,k)+M.slice(k+I)}let F0=0,y0=-1;for(let l=0;l<M.length;l++)M.charCodeAt(l)===e&&(F0++,y0=l);if(F0%2===1&&y0!==-1){let l=!1,c0=-1,l0=0;for(;l0<M.length;)M.charCodeAt(l0)===e&&(l?(l=!1,c0=-1):(c0=l0,l=!0)),l0++;l&&c0!==-1&&(M=M.slice(0,c0))}for(var v=!0;v;){v=!1;for(var L=-1,y=-1,R=-1,b=!1,w=0;w<M.length;w++){var S=M.charCodeAt(w);if(S===q0&&(w===0||M.charCodeAt(w-1)!==B0)){var E=w>0&&M.charCodeAt(w-1)===g0,h=E?w-1:w,T=n(M,w);if(T===-1)L=h,b=E,y=w+1,R=M.length;else{var g=T+1;if(g>=M.length)L=h,b=E,y=w+1,R=T;else if(M.charCodeAt(g)===s0){var I0=M.indexOf(")",g+1);I0===-1?(L=h,b=E,y=w+1,R=T,w=M.length):w=I0}else if(M.charCodeAt(g)===q0){var c=M.indexOf("]",g+1);c===-1?(L=h,b=E,y=w+1,R=T,w=M.length):w=c}else w=T}}}if(L>=0){var m=b?"":M.slice(y,R);M=M.slice(0,L)+m,v=!0}}let L0=M.match(/<([A-Z][A-Za-z0-9]*)(?:\s[^>]*)?>([^<]*)$/);if(L0&&L0.index!==void 0){for(var J0=!1,A0=0,m0=0;m0<L0.index;m0++)M.charCodeAt(m0)===e&&A0++;if(J0=A0%2===1,!J0){let l=L0[1];A9(M,"</"+l,0)===-1&&(M=M.replace(/<[A-Z][A-Za-z0-9]*(?:\s[^>]*)?>([^<]*)$/,"$1"))}}M!==C&&($=$.slice(0,J)+M,Z=J+M.length)}let z0=[];var P0=[];let f=J;var X0=X.disableAutoLink||X.disableBareUrls||Y.inAnchor?-1:$.indexOf("@",J);for(X0>=Z&&(X0=-1);J<Z;){let M=$.charCodeAt(J),C=null;if(M===e){if(C=LZ($,J,Z),!C){var w0=_9($,J,Z,e);J+=w0-1}}else if(M===O0||M===H0){var G0=gZ($,J,Z);if(G0){if(G0.canOpen||G0.canClose){J>f&&z0.push(m9($.slice(f,J)));var i=$.slice(J,J+G0.len),U0=m9(i);P0.push({idx:z0.length,ch:M,len:G0.len,canOpen:G0.canOpen,canClose:G0.canClose,active:!0}),z0.push(U0),J+=G0.len,f=J;continue}J+=G0.len-1}}else M===_0?C=kZ($,J,Z,Y,X):M===C0?C=SZ($,J,Z,Y,X):M===q0?(J+1<Z&&$.charCodeAt(J+1)===i0&&(C=fZ($,J,Z,Y)),C||(C=v6($,J,Z,Y,X))):M===g0&&J+1<Z&&$.charCodeAt(J+1)===q0?C=v6($,J,Z,Y,X):M===K0?(C=S6($,J,Z),!C&&!X.disableParsingRawHTML&&!X.ignoreHTMLBlocks&&(C=mZ($,J,Z,Y,X))):(M===o9||M===R9||M===b9)&&!Y.inAnchor&&!X.disableAutoLink&&(J===0||$.charCodeAt(J-1)!==K0)&&(C=TZ($,J,Z,X));if(!C&&X0>=0&&X0-J<=64&&!Y.inAnchor&&!X.disableAutoLink&&!X.disableBareUrls&&(M>=o&&M<=a||M>=W0&&M<=D0||M>=s&&M<=t)&&(C=hZ($,J,Z,X),!C&&J>=X0&&(X0=$.indexOf("@",J+1),X0>=Z&&(X0=-1))),M===g$){J>f&&z0.push(m9($.slice(f,J))),z0.push({type:_.breakLine}),J++,f=J;continue}if(C)J>f&&z0.push(m9($.slice(f,J))),z0.push(C.node),J=C.end,f=J;else{if(M===B0&&J+1<Z){let F0=$.charCodeAt(J+1);if(c$(F0)&Z0){J>f&&z0.push(m9($.slice(f,J))),z0.push(m9($[J+1])),J+=2,f=J;continue}}if(J++,X0<0||X0-J>64)for(;J<Z;){var N0=$.charCodeAt(J);if(N0<x9&&!_6[N0])J++;else break}}}if(Z>f){let M=$.slice(f,Z);(X.streaming||X.optimizeForStreaming)&&(M=M.replace(/\*\*([^*]+)$/,"$1"),M.match(/\*[^*]+$/)&&(M=M.replace(/\*([^*]+)$/,"$1")),M=M.replace(/__([^_]+)$/,"$1"),M.match(/_[^_]+$/)&&(M=M.replace(/_([^_]+)$/,"$1")),M=M.replace(/~~([^~]+)$/,"$1"),M=M.replace(/\[([^\]]+)$/,"$1"),M=M.replace(/\[([^\]]+)\]\([^)]*$/,"$1")),M&&z0.push(m9(M))}return P0.length>0&&xZ(z0,P0,Q,X),a9--,z0}var uZ=500;function v9($,J,Z){var Q=J.g||0;if(Q>uZ)return[{type:_.text,text:$}];J.g=Q+1;let X=J;if(Z.streaming||Z.optimizeForStreaming){var Y=$.length;Y>0&&$.charCodeAt(Y-1)===x&&Y--;for(var F=Y;F>0&&$.charCodeAt(F-1)!==x;)F--;if(F>0&&$.charCodeAt(F)===b0){for(var V=!0,G=F;G<Y;G++){var K=$.charCodeAt(G);if(K!==P&&K!==N&&K!==p&&K!==x0&&K!==b0){V=!1;break}}if(V){for(var q=F-1;q>0&&$.charCodeAt(q-1)!==x;)q--;$.charCodeAt(q)===b0&&($=$.slice(0,q).trimEnd())}}var W=$.trim(),O=W.lastIndexOf(`
`),U=O===-1?W:W.slice(O+1);if(U.length>0&&U.charCodeAt(0)===b0){for(var j=!1,H=!1,z=1;z<U.length;z++){var D=U.charCodeAt(z);D===b0&&(j=!0),D===p&&(H=!0)}j&&H&&($=O===-1?"":$.slice(0,$.lastIndexOf(U)).trimEnd())}for(var A=-1,B=-1,k=-1,I=$.length-1;I>=0;I--)if($.charCodeAt(I)===K0){var v=I+1<$.length?$.charCodeAt(I+1):0;if(v>=o&&v<=a||v>=W0&&v<=D0){for(var L=I+2;L<$.length;){var y=$.charCodeAt(L);if(y>=o&&y<=a||y>=W0&&y<=D0||y>=s&&y<=t)L++;else break}for(var R=L;R<$.length&&$.charCodeAt(R)!==u;)R++;if(R<$.length){for(var b=!1,w=R+1;w<$.length;w++)if($.charCodeAt(w)===K0){b=!0;break}b||(A=I,B=L,k=R+1)}}break}if(A>=0){for(var S=0,E=0;E<A;E++)$.charCodeAt(E)===e&&S++;if(S%2===0){var h=$.slice(A+1,B);A9($,"</"+h,0)===-1&&($=$.slice(0,A)+$.slice(k))}}var T=$.length;if(T>0){for(var g=$.lastIndexOf(`
`),I0=g===-1?0:g+1,c=T,m=I0,J0=0;m<c&&$.charCodeAt(m)===P&&J0<3;)m++,J0++;if(m<c){var A0=$.charCodeAt(m),m0=!1;if(A0===O0||A0===p||A0===D9){var z0=m+1;if(z0>=c||$.charCodeAt(z0)===P||$.charCodeAt(z0)===N){for(var P0=z0;P0<c&&($.charCodeAt(P0)===P||$.charCodeAt(P0)===N);)P0++;P0>=c&&(m0=!0)}}else if(A0>=s&&A0<=t){for(var f=m;f<c&&$.charCodeAt(f)>=s&&$.charCodeAt(f)<=t;)f++;if(f<c&&($.charCodeAt(f)===n0||$.charCodeAt(f)===t0)){var X0=f+1;if(X0>=c||$.charCodeAt(X0)===P||$.charCodeAt(X0)===N){for(var w0=X0;w0<c&&($.charCodeAt(w0)===P||$.charCodeAt(w0)===N);)w0++;w0>=c&&(m0=!0)}}}m0&&($=$.slice(0,I0).trimEnd())}}}if(J.inline)return d0($,0,$.length,J,Z);let G0=[],i=0,U0=$.length;if(i===0&&$.startsWith("---")){let n=V6($);if(n&&n.hasValidYaml){if(Z.preserveFrontmatter!==!1){let L0=$.slice(0,n.endPos).trimEnd();G0.push({type:_.frontmatter,text:L0})}i=n.endPos}}for(;i<U0;){for(var N0=$.indexOf(`
`,i),M=N0<0?U0:N0;i<U0&&$9($,i,M);)i=M<U0?M+1:M,i<U0&&(N0=$.indexOf(`
`,i),M=N0<0?U0:N0);if(i>=U0)break;$.charCodeAt(i),M0($,i,M);let n=null;if($.charCodeAt(i)!==r9&&Q0>=4&&!J.inHTML)n=vZ($,i);else if($.charCodeAt(i)!==r9){let L0=i+$0,l=$.charCodeAt(L0);l===Y9?n=R6($,i,J,Z):l===u?n=_Z($,i,J,Z):l===e||l===_0?n=AZ($,i,J):l===p||l===O0||l===H0?(n=L9($,i),!n&&(n=D6($,i,J,Z))):l===D9||l>=s&&l<=t?n=D6($,i,J,Z):l===K0?n=L6($,i,J,Z):l===b0?n=B6($,i,J,Z):l===q0&&(n=bZ($,i,J))}if(!n){for(var C=!1,F0=i;F0<M;F0++)if($.charCodeAt(F0)===b0){C=!0;break}C&&(n=B6($,i,J,Z))}if(n||(n=wZ($,i,J,Z)),n)n.node.type!==_.refCollection&&G0.push(n.node),i=n.end;else{var y0=$.indexOf(`
`,i);i=y0<0?U0:y0+1}}return J.g=Q,G0}function pZ($,J){a9=0,$.charCodeAt(0)===65279&&($=$.slice(1)),$=T$($);let Z={inline:!1,inAnchor:!1,inHTML:!1,inList:!1,inBlockQuote:!1,refs:{}},Q={...J,slugify:J?.slugify?Y=>J.slugify(Y,e0):e0,sanitizer:J?.sanitizer||T9,tagfilter:J?.tagfilter!==!1};A$($,Z.refs,Q);let X=v9($,Z,Q);return Z.refs&&Object.keys(Z.refs).length>0?[{type:_.refCollection,refs:Z.refs},...X]:X}function UJ($,J,Z,Q){var X=M9($,J);return X?{tagName:X.tag,tagLower:X.tag.toLowerCase(),attrs:X.rawAttrs,whitespaceBeforeAttrs:X.whitespaceBeforeAttrs,isSelfClosing:X.selfClosing,hasSpaceBeforeSlash:X.hasSpaceBeforeSlash,isClosing:X.isClosing,hasNewline:X.whitespaceBeforeAttrs.includes(`
`)||X.rawAttrs.includes(`
`),endPos:X.end}:null}function _$($,J,Z){a9=0,$=T$($),!J.refs&&(J.refs={}),A$($,J.refs,Z);let Q=v9($,J,Z);return J.refs&&Object.keys(J.refs).length>0?[{type:_.refCollection,refs:J.refs},...Q]:Q}var lZ=/^\n+/,g6=z9.createContext(void 0);function oZ($,J,Z,Q,X,Y,F,V){let G=V.styles||{};switch($.type){case _.blockQuote:{let K=$;return Q(k0,{key:Z.key,style:G.blockquote},J(K.children,Z))}case _.breakLine:return`
`;case _.breakThematic:return Q(k0,{key:Z.key,style:G.thematicBreak});case _.frontmatter:if(V.preserveFrontmatter){let K=$;return Q(f0,{key:Z.key,style:G.codeBlock},K.text)}return null;case _.codeBlock:{let K=$;return Q(k0,{key:Z.key,style:G.codeBlock},Q(f0,{style:G.codeInline},K.text))}case _.codeInline:{let K=$;return Q(f0,{key:Z.key,style:G.codeInline},K.text)}case _.footnoteReference:{let K=$,q=X(K.target,"a","href");return q?Q(f0,{key:Z.key,onPress:()=>{V.onLinkPress?V.onLinkPress(q,K.text):E6.openURL(q).catch(()=>{})},style:G.link},Q(f0,{style:{fontWeight:"bold"}},K.text)):null}case _.gfmTask:{let K=$;return Q(f0,{key:Z.key,style:G.gfmTask},K.completed?"[x]":"[ ]")}case _.heading:{let K=$,q=`heading${K.level}`,W=G[q];return Q(f0,{key:Z.key,style:W},J(K.children,Z))}case _.htmlBlock:{let K=$;if(V.tagfilter&&h$(K.tag)){let q=typeof K.a=="string"?K.a:`<${K.tag}>`;return Q(f0,{key:Z.key},q)}if(K.a&&K.d){let O=function(D){return(D.type===_.htmlSelfClosing||D.type===_.htmlBlock)&&D.c?[]:D.type===_.paragraph?D.children?.flatMap(O)||[]:D.type===_.text?D.text?.trim()?[D]:[]:D.type===_.htmlBlock&&D.children?[{...D,children:D.children?.flatMap(O)}]:[D]},q=K.tag.toLowerCase();if(d$(q)){let D=K.a.replace(new RegExp("\\s*</"+q+">\\s*$","i"),"");return V.tagfilter&&(D=m$(D)),Q(K.tag,{key:Z.key,...w9(K.attrs||{})},D)}if(/<\/?pre\b/i.test(K.a)){let D=V.tagfilter?m$(K.a):K.a;return Q(f0,{key:Z.key,style:G.codeBlock},D)}if(K.children&&K.children.length>0)return Q(K.tag,{key:Z.key,...w9(K.attrs||{})},J(K.children.flatMap(O),Z));let U=K.a.replace(/>\s+</g,"><").replace(/\n+/g," ").trim();if(new RegExp(`^<${K.tag}(\\s[^>]*)?>(\\s*</${K.tag}>)?$`,"i").test(U))return Q(K.tag,{key:Z.key,...w9(K.attrs||{})});let z=_$(U,{inline:!1,refs:F,inHTML:!1},{slugify:D=>Y(D,e0),sanitizer:(D,A,B)=>X(D,A,B),tagfilter:!0});return Q(K.tag,{key:Z.key,...w9(K.attrs||{})},J(z.flatMap(O),Z))}return h9(K.tag)?Q(K.tag,{key:Z.key,...w9(K.attrs||{})}):Q(K.tag,{key:Z.key,...w9(K.attrs||{})},K.children?J(K.children,Z):"")}case _.htmlSelfClosing:{let K=$;if(V.tagfilter&&h$(K.tag)){let q=typeof K.a=="string"?K.a:`<${K.tag} />`;return Q(f0,{key:Z.key},q)}return Q(K.tag,{key:Z.key,...w9(K.attrs||{})})}case _.image:{let K=$,q=X(K.target,"img","src");return q?Q("img",{key:Z.key,source:{uri:q},accessibilityLabel:K.alt||void 0,style:G.image}):null}case _.link:{let K=$,q={textDecorationLine:"underline"},W=G.link?[q,G.link]:q,O={key:Z.key,style:W};if(K.target!=null){let U=W6(K.target);O.onPress=()=>{V.onLinkPress?V.onLinkPress(U,K.title):E6.openURL(U).catch(()=>{})},V.onLinkLongPress&&(O.onLongPress=()=>V.onLinkLongPress(U,K.title))}return Q("a",O,J(K.children,Z))}case _.table:{let K=$;return Q(k0,{key:Z.key,style:G.table},Q(k0,{style:G.tableHeader},Q(k0,{style:{flexDirection:"row"}},K.header.map(function(W,O){return Q(k0,{key:O,style:[G.tableHeaderCell,K.align[O]!=null?{alignItems:K.align[O]==="center"?"center":K.align[O]==="right"?"flex-end":"flex-start"}:{}]},J(W,Z))}))),Q(k0,{},K.cells.map(function(W,O){return Q(k0,{key:O,style:{flexDirection:"row"}},W.map(function(j,H){return Q(k0,{key:H,style:[G.tableCell,K.align[H]!=null?{alignItems:K.align[H]==="center"?"center":K.align[H]==="right"?"flex-end":"flex-start"}:{}]},J(j,Z))}))})))}case _.text:return $.text;case _.textFormatted:{let K=$,W={em:{fontStyle:"italic"},strong:{fontWeight:"bold"},del:{textDecorationLine:"line-through"}}[K.tag],O=G[K.tag]||W;return Q(f0,{key:Z.key,style:O},J(K.children,Z))}case _.orderedList:case _.unorderedList:{let K=$,q=$.type===_.orderedList,W=q?G.listOrdered:G.listUnordered;return Q(k0,{key:Z.key,style:W},K.items.map((O,U)=>{let j=q&&"start"in K&&K.start!=null?K.start+U:U+1,H=q?`${j}.`:"\u2022",z=q?G.listItemNumber:G.listItemBullet;return Q(k0,{key:U,style:{flexDirection:"row"}},Q(f0,{style:z},H+" "),Q(k0,{style:G.listItem},J(O,Z)))}))}case _.paragraph:return Q("p",{key:Z.key,style:G.paragraph},J($.children,Z));case _.ref:return null;default:return null}}var rZ=($,J,Z,Q,X,Y)=>{let F=(K,q,W)=>{let O=(j,H)=>{let z=Array.isArray(j)?j:[j];return q(z,H||W)},U=()=>oZ(K,O,W,J,Z,Q,X,Y);return $?$(U,K,q,W):U()},V=K=>K.map(q=>"text"in q?q.text:""),G=(K,q={})=>{let W=Array.isArray(K)?K:[K],O=(q.renderDepth||0)+1;if(O>2500)return V(W);q.renderDepth=O;let U=q.key,j=[],H=!1;for(let z=0;z<W.length;z++){q.key=z;let D=F(W[z],G,q),A=typeof D=="string";if(A&&H)j[j.length-1]+=D;else if(D!==null)if(Array.isArray(D))for(let B=0;B<D.length;B++)j.push(D[B]);else j.push(D);H=A}return q.key=U,q.renderDepth=O-1,j.length===1?j[0]:j};return G},iZ=($,J)=>{if(!J||typeof $!="string")return $;let Z=i9(J,$,void 0);return Z?typeof Z=="function"||typeof Z=="object"&&Z!==null&&"render"in Z?Z:i9(J,`${$}.component`,$):$},aZ=$=>{let J=$.toLowerCase();return J==="img"?cZ:J==="div"||J==="section"||J==="article"||J==="aside"||J==="header"||J==="footer"||J==="main"||J==="nav"||J==="figure"||J==="figcaption"||J==="blockquote"||J==="ul"||J==="ol"||J==="li"||J==="table"||J==="thead"||J==="tbody"||J==="tr"||J==="th"||J==="td"?k0:d$(J)?k0:f0};function nZ($,J){let Z={...J||{}};Z.overrides=Z.overrides||{};let Q=Z.slugify||e0,X=Z.sanitizer||T9,Y=Z.createElement||z9.createElement;function F(H,z,...D){if(typeof H!="string")return Y(H,z,...D);let A=i9(Z.overrides||{},`${H}.props`,{}),B=iZ(H,Z.overrides||{}),k={...z,...A,style:z.style||A.style||void 0};if(typeof B=="function"||typeof B=="object"&&B!==null)return Y(B,k,...D);let I=aZ(B);return Y(I,k,...D)}let V={slugify:H=>Q(H,e0),sanitizer:(H,z,D)=>X(H,z,D),tagfilter:Z.tagfilter!==!1,disableAutoLink:Z.disableAutoLink,disableParsingRawHTML:Z.disableParsingRawHTML,enforceAtxHeadings:Z.enforceAtxHeadings},G=$[0]&&$[0].type===_.refCollection?$[0].refs:{},K=rZ(Z.renderRule,F,(H,z,D)=>X(H,z,D),Q,G,Z),q=K($,{inline:Z.forceInline,refs:G}),W=Array.isArray(q)?q:[q],O=[];for(let H in G)H.charCodeAt(0)===i0&&O.push({identifier:H,footnote:G[H].target});if(O.length&&W.push(Y(k0,{key:"footer"},O.map(function(z){let D=z.identifier.charCodeAt(0)===i0?z.identifier.slice(1):z.identifier,A=_$(z.footnote,{inline:!0,refs:G},V),B=K(A,{inline:!0,refs:G}),k=typeof B=="string"?Y(f0,{},B):B;return Y(k0,{key:z.identifier},Y(f0,{},D+": "),k)}))),Z.wrapper===null)return W;let U=Z.wrapper||(Z.forceInline?f0:k0),j;if(W.length>1||Z.forceWrapper)j=W;else if(W.length===1){let H=W[0];return typeof H=="string"?Y(f0,{key:"outer",...Z.wrapperProps},H):H}else return null;return Y(U,{key:"outer",...Z.wrapperProps},j)}function sZ($="",J={}){let Z={...J||{}};Z.overrides=Z.overrides||{};let Q=Z.slugify||e0,X=Z.sanitizer||T9;function Y(G){let K=Z.forceInline||!Z.forceBlock&&!F6.test(G),q={slugify:U=>Q(U,e0),sanitizer:(U,j,H)=>X(U,j,H),tagfilter:Z.tagfilter!==!1,disableAutoLink:Z.disableAutoLink,disableParsingRawHTML:Z.disableParsingRawHTML,enforceAtxHeadings:Z.enforceAtxHeadings};K||A$(G,F,q);let W=G;if(!K){let U=W.length;for(;U>0&&(W[U-1]===`
`||W[U-1]==="\r");)U--;W=W.slice(0,U),W=`${W.replace(lZ,"")}

`}let O=_$(K?G:W,{inline:K,refs:F},q);return nZ(O,{...Z,forceInline:K})}let F={};return Y($)}var jJ=({options:$,children:J})=>z9.createElement(g6.Provider,{value:$},J),tZ=({children:$,options:J,...Z})=>{let Q=z9.useContext(g6),X=z9.useMemo(()=>{var V=Object.assign({},Q,J);return V.styles=Object.assign({},Q?.styles,J?.styles),V.overrides=Object.assign({},Q?.overrides,J?.overrides),V.wrapperProps=Object.assign({},Q?.wrapperProps,J?.wrapperProps,Z),V},[Q,J,Z]),Y=$??"";return z9.useMemo(()=>sZ(Y,X),[Y,X])},_J=tZ;export{e0 as slugify,T9 as sanitizer,pZ as parser,_J as default,sZ as compiler,nZ as astToNative,_ as RuleType,jJ as MarkdownProvider,g6 as MarkdownContext,tZ as Markdown};
